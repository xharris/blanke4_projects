

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hump 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="None" href="index.html#document-index"/> 

  
  <script src="_static/js/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://hump.readthedocs.io/en/latest/" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'index'
</script>

<script type="text/javascript" src="_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html#document-index" class="icon icon-home"> hump
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-gamestate">hump.gamestate</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-timer">hump.timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-vector">hump.vector</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-vector-light">hump.vector-light</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-class">hump.class</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-signal">hump.signal</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-camera">hump.camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-license">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html#document-index">hump</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html#document-index">Docs</a> &raquo;</li>
      
    <li>hump 1.0 documentation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/vrld/hump/blob/master/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hump-helper-utilities-for-a-multitude-of-problems">
<h1><strong>hump</strong> - Helper Utilities for a Multitude of Problems<a class="headerlink" href="#hump-helper-utilities-for-a-multitude-of-problems" title="Permalink to this headline">¶</a></h1>
<p><strong>hump</strong> is a set of lightweight helpers for the awesome <a class="reference external" href="http://love2d.org">LÖVE</a> game framework.  It will help to get you over the initial
hump when starting to build a new game.</p>
<p><strong>hump</strong> differs from many other libraries in that every component is
independent of the remaining ones.
The footprint is very small, so the library should fit nicely into your
projects.</p>
<div class="section" id="read-on">
<h2>Read on<a class="headerlink" href="#read-on" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-gamestate"></span><div class="section" id="hump-gamestate">
<h3>hump.gamestate<a class="headerlink" href="#hump-gamestate" title="Permalink to this headline">¶</a></h3>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Gamestate</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">hump.gamestate&quot;</span>
</pre></div>
</div>
<p>A gamestate encapsulates independent data an behaviour in a single table.</p>
<p>A typical game could consist of a menu-state, a level-state and a game-over-state.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">menu</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">-- previously: Gamestate.new()</span>
<span class="kd">local</span> <span class="n">game</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">Press Enter to continue&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">keyreleased</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">return&#39;</span> <span class="k">then</span>
        <span class="n">Gamestate</span><span class="p">.</span><span class="n">switch</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">game</span><span class="p">:</span><span class="n">enter</span><span class="p">()</span>
    <span class="n">Entities</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="c1">-- setup entities here</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">game</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">Entities</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">game</span><span class="p">:</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">Entities</span><span class="p">.</span><span class="n">draw</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">load</span><span class="p">()</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">registerEvents</span><span class="p">()</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">switch</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="gamestate-callbacks">
<span id="callbacks"></span><h4>Gamestate Callbacks<a class="headerlink" href="#gamestate-callbacks" title="Permalink to this headline">¶</a></h4>
<p>A gamestate can define all callbacks that LÖVE defines. In addition, there are
callbacks for initalizing, entering and leaving a state:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">init()</span></code></dt>
<dd>Called once, and only once, before entering the state the first time. See
<a class="reference internal" href="#Gamestate.switch" title="Gamestate.switch"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.switch()</span></code></a>.</dd>
<dt><code class="docutils literal"><span class="pre">enter(previous,</span> <span class="pre">...)</span></code></dt>
<dd>Called every time when entering the state. See <a class="reference internal" href="#Gamestate.switch" title="Gamestate.switch"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.switch()</span></code></a>.</dd>
<dt><code class="docutils literal"><span class="pre">leave()</span></code></dt>
<dd>Called when leaving a state. See <a class="reference internal" href="#Gamestate.switch" title="Gamestate.switch"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.switch()</span></code></a> and <a class="reference internal" href="#Gamestate.pop" title="Gamestate.pop"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.pop()</span></code></a>.</dd>
<dt><code class="docutils literal"><span class="pre">resume()</span></code></dt>
<dd>Called when re-entering a state by <a class="reference internal" href="#Gamestate.pop" title="Gamestate.pop"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.pop()</span></code></a>-ing another state.</dd>
<dt><code class="docutils literal"><span class="pre">update()</span></code></dt>
<dd>Update the game state. Called every frame.</dd>
<dt><code class="docutils literal"><span class="pre">draw()</span></code></dt>
<dd>Draw on the screen. Called every frame.</dd>
<dt><code class="docutils literal"><span class="pre">focus()</span></code></dt>
<dd>Called if the window gets or looses focus.</dd>
<dt><code class="docutils literal"><span class="pre">keypressed()</span></code></dt>
<dd>Triggered when a key is pressed.</dd>
<dt><code class="docutils literal"><span class="pre">keyreleased()</span></code></dt>
<dd>Triggered when a key is released.</dd>
<dt><code class="docutils literal"><span class="pre">mousepressed()</span></code></dt>
<dd>Triggered when a mouse button is pressed.</dd>
<dt><code class="docutils literal"><span class="pre">mousereleased()</span></code></dt>
<dd>Triggered when a mouse button is released.</dd>
<dt><code class="docutils literal"><span class="pre">joystickpressed()</span></code></dt>
<dd>Triggered when a joystick button is pressed.</dd>
<dt><code class="docutils literal"><span class="pre">joystickreleased()</span></code></dt>
<dd>Triggered when a joystick button is released.</dd>
<dt><code class="docutils literal"><span class="pre">quit()</span></code></dt>
<dd>Called on quitting the game. Only called on the active gamestate.</dd>
</dl>
<p>When using <a class="reference internal" href="#Gamestate.registerEvents" title="Gamestate.registerEvents"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.registerEvents()</span></code></a>, all these callbacks will be called by the
corresponding LÖVE callbacks and receive receive the same arguments (e.g.
<code class="docutils literal"><span class="pre">state:update(dt)</span></code> will be called by <code class="docutils literal"><span class="pre">love.update(dt)</span></code>).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">menu</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1">-- previously: Gamestate.new()</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">init</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">newImage</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">bg.jpg&#39;</span><span class="p">)</span>
    <span class="n">Buttons</span><span class="p">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">enter</span><span class="p">(</span><span class="n">previous</span><span class="p">)</span> <span class="c1">-- runs every time the state is entered</span>
    <span class="n">Buttons</span><span class="p">.</span><span class="n">setActive</span><span class="p">(</span><span class="n">Buttons</span><span class="p">.</span><span class="n">start</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span> <span class="c1">-- runs every frame</span>
    <span class="n">Buttons</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">background</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">Buttons</span><span class="p">.</span><span class="n">draw</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">keyreleased</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">up&#39;</span> <span class="k">then</span>
        <span class="n">Buttons</span><span class="p">.</span><span class="n">selectPrevious</span><span class="p">()</span>
    <span class="k">elseif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">down&#39;</span> <span class="k">then</span>
        <span class="n">Buttons</span><span class="p">.</span><span class="n">selectNext</span><span class="p">()</span>
    <span class="k">elseif</span>
        <span class="n">Buttons</span><span class="p">.</span><span class="n">active</span><span class="p">:</span><span class="n">onClick</span><span class="p">()</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">menu</span><span class="p">:</span><span class="n">mousereleased</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">mouse_btn</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">button</span> <span class="o">=</span> <span class="n">Buttons</span><span class="p">.</span><span class="n">hovered</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">button</span> <span class="k">then</span>
        <span class="n">Button</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mouse_btn</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">l&#39;</span> <span class="k">then</span>
            <span class="n">button</span><span class="p">:</span><span class="n">onClick</span><span class="p">()</span>
        <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="function-reference">
<h4>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="Gamestate.new">
<code class="descclassname">Gamestate.</code><code class="descname">new</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Gamestate.new" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An empty table.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Deprecated: Use the table constructor instead (see example)</strong></p>
<p>Declare a new gamestate (just an empty table). A gamestate can define several
callbacks.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">menu</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1">-- deprecated method:</span>
<span class="n">menu</span> <span class="o">=</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">new</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="Gamestate.switch">
<code class="descclassname">Gamestate.</code><code class="descname">switch</code><span class="sig-paren">(</span><em>to</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Gamestate.switch" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>to</strong> (<em>Gamestate</em>) &#8211; Target gamestate.</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Additional arguments to pass to <code class="docutils literal"><span class="pre">to:enter(current,</span> <span class="pre">...)</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The results of <code class="docutils literal"><span class="pre">to:enter(current,</span> <span class="pre">...)</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Switch to a gamestate, with any additional arguments passed to the new state.</p>
<p>Switching a gamestate will call the <code class="docutils literal"><span class="pre">leave()</span></code> callback on the current
gamestate, replace the current gamestate with <code class="docutils literal"><span class="pre">to</span></code>, call the <code class="docutils literal"><span class="pre">init()</span></code> function
if, and only if, the state was not yet inialized and finally call
<code class="docutils literal"><span class="pre">enter(old_state,</span> <span class="pre">...)</span></code> on the new gamestate.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Processing of callbacks is suspended until <code class="docutils literal"><span class="pre">update()</span></code> is called on the new
gamestate, but the function calling <a class="reference internal" href="#Gamestate.switch" title="Gamestate.switch"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.switch()</span></code></a> can still continue - it is
your job to make sure this is handled correctly. See also the examples below.</p>
</div>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Gamestate</span><span class="p">.</span><span class="n">switch</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">level_two</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- stop execution of the current state by using return</span>
<span class="k">if</span> <span class="n">player</span><span class="p">.</span><span class="n">has_died</span> <span class="k">then</span>
    <span class="k">return</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">switch</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">level_two</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- this will not be called when the state is switched</span>
<span class="n">player</span><span class="p">:</span><span class="n">update</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="Gamestate.Gamestate.current">
<code class="descclassname">Gamestate.Gamestate.</code><code class="descname">current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Gamestate.Gamestate.current" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The active gamestate.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Returns the currently activated gamestate.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">current</span><span class="p">()</span> <span class="o">~=</span> <span class="n">menu</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">p&#39;</span> <span class="k">then</span>
        <span class="n">Gamestate</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">pause</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="Gamestate.push">
<code class="descclassname">Gamestate.</code><code class="descname">push</code><span class="sig-paren">(</span><em>to</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Gamestate.push" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>to</strong> (<em>Gamestate</em>) &#8211; Target gamestate.</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Additional arguments to pass to <code class="docutils literal"><span class="pre">to:enter(current,</span> <span class="pre">...)</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The results of <code class="docutils literal"><span class="pre">to:enter(current,</span> <span class="pre">...)</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Pushes the <code class="docutils literal"><span class="pre">to</span></code> on top of the state stack, i.e. makes it the active state.
Semantics are the same as <code class="docutils literal"><span class="pre">switch(to,</span> <span class="pre">...)</span></code>, except that <code class="docutils literal"><span class="pre">leave()</span></code> is <em>not</em>
called on the previously active state.</p>
<p>Useful for pause screens, menus, etc.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Processing of callbacks is suspended until <code class="docutils literal"><span class="pre">update()</span></code> is called on the
new gamestate, but the function calling <code class="docutils literal"><span class="pre">GS.push()</span></code> can still continue -
it is your job to make sure this is handled correctly. See also the
example below.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- pause gamestate</span>
<span class="n">Pause</span> <span class="o">=</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">new</span><span class="p">()</span>
<span class="k">function</span> <span class="nf">Pause</span><span class="p">:</span><span class="n">enter</span><span class="p">(</span><span class="n">from</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">from</span> <span class="o">=</span> <span class="n">from</span> <span class="c1">-- record previous state</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">Pause</span><span class="p">:</span><span class="n">draw</span><span class="p">()</span>
    <span class="kd">local</span> <span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">getWidth</span><span class="p">(),</span> <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()</span>
    <span class="c1">-- draw previous screen</span>
    <span class="n">self</span><span class="p">.</span><span class="n">from</span><span class="p">:</span><span class="n">draw</span><span class="p">()</span>
    <span class="c1">-- overlay with pause message</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">setColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">rectangle</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">fill&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span><span class="n">H</span><span class="p">)</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">setColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">PAUSE&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">H</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">center&#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- [...]</span>
<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">current</span><span class="p">()</span> <span class="o">~=</span> <span class="n">menu</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">p&#39;</span> <span class="k">then</span>
        <span class="k">return</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">pause</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="Gamestate.pop">
<code class="descclassname">Gamestate.</code><code class="descname">pop</code><span class="sig-paren">(</span><em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Gamestate.pop" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The results of <code class="docutils literal"><span class="pre">new_state:resume(...)</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Calls <code class="docutils literal"><span class="pre">leave()</span></code> on the current state and then removes it from the stack, making
the state below the current state and calls <code class="docutils literal"><span class="pre">resume(...)</span></code> on the activated state.
Does <em>not</em> call <code class="docutils literal"><span class="pre">enter()</span></code> on the activated state.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Processing of callbacks is suspended until <code class="docutils literal"><span class="pre">update()</span></code> is called on the
new gamestate, but the function calling <code class="docutils literal"><span class="pre">GS.pop()</span></code> can still continue -
it is your job to make sure this is handled correctly. See also the
example below.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- extending the example of Gamestate.push() above</span>
<span class="k">function</span> <span class="nf">Pause</span><span class="p">:</span><span class="n">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">p&#39;</span> <span class="k">then</span>
        <span class="k">return</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span> <span class="c1">-- return to previous state</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="Gamestate.&lt;callback&gt;">
<code class="descclassname">Gamestate.</code><code class="descname">&lt;callback&gt;</code><span class="sig-paren">(</span><em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Gamestate.<callback>" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>...</strong> (<em>mixed</em>) &#8211; Arguments to pass to the corresponding function.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The result of the callback function.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Calls a function on the current gamestate. Can be any function, but is intended
to be one of the <a class="reference internal" href="#callbacks"><span>Gamestate Callbacks</span></a>. Mostly useful when not using
<a class="reference internal" href="#Gamestate.registerEvents" title="Gamestate.registerEvents"><code class="xref js js-func docutils literal"><span class="pre">Gamestate.registerEvents()</span></code></a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">draw</span><span class="p">()</span> <span class="c1">-- &lt;callback&gt; is `draw&#39;</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span> <span class="c1">-- pass dt to currentState:update(dt)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span> <span class="c1">-- pass multiple arguments</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="Gamestate.registerEvents">
<code class="descclassname">Gamestate.</code><code class="descname">registerEvents</code><span class="sig-paren">(</span><span class="optional">[</span><em>callbacks</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Gamestate.registerEvents" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>callbacks</strong> (<em>table</em>) &#8211; Names of the callbacks to register. If omitted,
register all love callbacks (optional).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Overwrite love callbacks to call <code class="docutils literal"><span class="pre">Gamestate.update()</span></code>, <code class="docutils literal"><span class="pre">Gamestate.draw()</span></code>,
etc. automatically. <code class="docutils literal"><span class="pre">love</span></code> callbacks (e.g. <code class="docutils literal"><span class="pre">love.update()</span></code>) are still
invoked as usual.</p>
<p>This is by done by overwriting the love callbacks, e.g.:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="kd">local</span> <span class="n">old_update</span> <span class="o">=</span> <span class="n">love</span><span class="p">.</span><span class="n">update</span>
<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">old_update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Gamestate</span><span class="p">.</span><span class="n">current</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only works when called in love.load() or any other function that is
executed <em>after</em> the whole file is loaded.</p>
</div>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">load</span><span class="p">()</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">registerEvents</span><span class="p">()</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">switch</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- love callback will still be invoked</span>
<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="c1">-- no need for Gamestate.update(dt)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">load</span><span class="p">()</span>
    <span class="c1">-- only register draw, update and quit</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">registerEvents</span><span class="p">{</span><span class="s1">&#39;</span><span class="s">draw&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">update&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">quit&#39;</span><span class="p">}</span>
    <span class="n">Gamestate</span><span class="p">.</span><span class="n">switch</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<span id="document-timer"></span><div class="section" id="hump-timer">
<h3>hump.timer<a class="headerlink" href="#hump-timer" title="Permalink to this headline">¶</a></h3>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Timer</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">hump.timer&quot;</span>
</pre></div>
</div>
<p>hump.timer offers a simple interface to schedule the execution of functions. It
is possible to run functions <em>after</em> and <em>for</em> some amount of time. For
example, a timer could be set to move critters every 5 seconds or to make the
player invincible for a short amount of time.</p>
<p>In addition to that, <code class="docutils literal"><span class="pre">hump.timer</span></code> offers various <a class="reference external" href="http://en.wikipedia.org/wiki/Inbetweening">tweening</a> functions that make it
easier to produce <a class="reference external" href="http://www.youtube.com/watch?v=Fy0aCDmgnxg">juicy games</a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s"> &#39;</span> <span class="k">then</span>
        <span class="n">Timer</span><span class="p">.</span><span class="n">after</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">Hello, world!&quot;</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="function-reference">
<h4>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="Timer.new">
<code class="descclassname">Timer.</code><code class="descname">new</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Timer.new" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A timer instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Creates a new timer instance that is independent of the global timer: It will
manage it&#8217;s own list of scheduled functions and does not in any way affect the
the global timer. Likewise, the global timer does not affect timer instances.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don&#8217;t need multiple independent schedulers, you can use the
global/default timer (see examples).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike the default timer, timer instances use the colon-syntax, i.e.,
you need to call <code class="docutils literal"><span class="pre">instance:after(1,</span> <span class="pre">foo)</span></code> instead of <code class="docutils literal"><span class="pre">Timer.after(1,</span>
<span class="pre">foo)</span></code>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">menuTimer</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">new</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.after">
<code class="descclassname">Timer.</code><code class="descname">after</code><span class="sig-paren">(</span><em>delay</em>, <em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#Timer.after" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>delay</strong> (<em>number</em>) &#8211; Number of seconds the function will be delayed.</li>
<li><strong>func</strong> (<em>function</em>) &#8211; The function to be delayed.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The timer handle. See also <a class="reference internal" href="#Timer.cancel" title="Timer.cancel"><code class="xref js js-func docutils literal"><span class="pre">Timer.cancel()</span></code></a>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Schedule a function. The function will be executed after <code class="docutils literal"><span class="pre">delay</span></code> seconds have
elapsed, given that <code class="docutils literal"><span class="pre">update(dt)</span></code> is called every frame.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no guarantee that the delay will not be exceeded, it is only
guaranteed that the function will <em>not</em> be executed <em>before</em> the delay has
passed.</p>
</div>
<p><code class="docutils literal"><span class="pre">func</span></code> will receive itself as only parameter. This is useful to implement
periodic behavior (see the example).</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- grant the player 5 seconds of immortality</span>
<span class="n">player</span><span class="p">.</span><span class="n">isInvincible</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">after</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="n">player</span><span class="p">.</span><span class="n">isInvincible</span> <span class="o">=</span> <span class="kc">false</span> <span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- print &quot;foo&quot; every second. See also every()</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">after</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">foo&quot;</span><span class="p">)</span> <span class="n">Timer</span><span class="p">.</span><span class="n">after</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">--Using a timer instance:</span>
<span class="n">menuTimer</span><span class="p">:</span><span class="n">after</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">finishAnimation</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.script">
<code class="descclassname">Timer.</code><code class="descname">script</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#Timer.script" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> (<em>function</em>) &#8211; Script to execute.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Execute a function that can be paused without causing the rest of the program to
be suspended. <code class="docutils literal"><span class="pre">func</span></code> will receive a function - <code class="docutils literal"><span class="pre">wait</span></code> - to do interrupt the
script (but not the whole program) as only argument.  The function prototype of
wait is: <code class="docutils literal"><span class="pre">wait(delay)</span></code>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Timer</span><span class="p">.</span><span class="n">script</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">Now&quot;</span><span class="p">)</span>
    <span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">After one second&quot;</span><span class="p">)</span>
    <span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">Bye!&quot;</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- useful for splash screens</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">script</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">splash</span><span class="p">.</span><span class="n">pos</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span> <span class="o">=</span> <span class="mi">300</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">in-out-quad&#39;</span><span class="p">)</span>
    <span class="n">wait</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1">-- show the splash for 5 seconds</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">slpash</span><span class="p">.</span><span class="n">pos</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span> <span class="o">=</span> <span class="mi">800</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">in-out-quad&#39;</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- repeat something with a varying delay</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">script</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">true</span> <span class="k">do</span>
        <span class="n">spawn_ship</span><span class="p">()</span>
        <span class="n">wait</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">production_speed</span><span class="p">))</span>
    <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- jumping with timer.script</span>
<span class="n">self</span><span class="p">.</span><span class="n">timers</span><span class="p">:</span><span class="n">script</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">w</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">12</span>
    <span class="n">self</span><span class="p">.</span><span class="n">jumping</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="p">{</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="mi">8</span><span class="p">},</span> <span class="s2">&quot;</span><span class="s">out-cubic&quot;</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
        <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="p">{</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span><span class="s2">&quot;</span><span class="s">in-cubic&quot;</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>

    <span class="n">self</span><span class="p">.</span><span class="n">quad</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">quads</span><span class="p">.</span><span class="n">jump</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">wait</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="n">self</span><span class="p">.</span><span class="n">quad</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">quads</span><span class="p">.</span><span class="n">jump</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">wait</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="n">self</span><span class="p">.</span><span class="n">quad</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">quads</span><span class="p">.</span><span class="n">jump</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">wait</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="n">self</span><span class="p">.</span><span class="n">quad</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">quads</span><span class="p">.</span><span class="n">jump</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">wait</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="n">self</span><span class="p">.</span><span class="n">jumping</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="n">self</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.every">
<code class="descclassname">Timer.</code><code class="descname">every</code><span class="sig-paren">(</span><em>delay</em>, <em>func</em><span class="optional">[</span>, <em>count</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Timer.every" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>delay</strong> (<em>number</em>) &#8211; Number of seconds between two consecutive function calls.</li>
<li><strong>func</strong> (<em>function</em>) &#8211; The function to be called periodically.</li>
<li><strong>count</strong> (<em>number</em>) &#8211; Number of times the function is to be called (optional).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The timer handle. See also <a class="reference internal" href="#Timer.cancel" title="Timer.cancel"><code class="xref js js-func docutils literal"><span class="pre">Timer.cancel()</span></code></a>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Add a function that will be called <code class="docutils literal"><span class="pre">count</span></code> times every <code class="docutils literal"><span class="pre">delay</span></code> seconds.</p>
<p>If <code class="docutils literal"><span class="pre">count</span></code> is omitted, the function will be called until it returns <code class="docutils literal"><span class="pre">false</span></code>
or <a class="reference internal" href="#Timer.cancel" title="Timer.cancel"><code class="xref js js-func docutils literal"><span class="pre">Timer.cancel()</span></code></a> or <a class="reference internal" href="#Timer.clear" title="Timer.clear"><code class="xref js js-func docutils literal"><span class="pre">Timer.clear()</span></code></a> is called on the timer instance.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- toggle light on and off every second</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">every</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="n">lamp</span><span class="p">:</span><span class="n">toggleLight</span><span class="p">()</span> <span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- launch 5 fighters in quick succession (using a timer instance)</span>
<span class="n">mothership_timer</span><span class="p">:</span><span class="n">every</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="n">self</span><span class="p">:</span><span class="n">launchFighter</span><span class="p">()</span> <span class="k">end</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- flicker player&#39;s image as long as he is invincible</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">every</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">player</span><span class="p">:</span><span class="n">flipImage</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">player</span><span class="p">.</span><span class="n">isInvincible</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.during">
<code class="descclassname">Timer.</code><code class="descname">during</code><span class="sig-paren">(</span><em>delay</em>, <em>func</em><span class="optional">[</span>, <em>after</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Timer.during" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>delay</strong> (<em>number</em>) &#8211; Number of seconds the func will be called.</li>
<li><strong>func</strong> (<em>function</em>) &#8211; The function to be called on <code class="docutils literal"><span class="pre">update(dt)</span></code>.</li>
<li><strong>after</strong> (<em>function</em>) &#8211; A function to be called after delay seconds (optional).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The timer handle. See also <a class="reference internal" href="#Timer.cancel" title="Timer.cancel"><code class="xref js js-func docutils literal"><span class="pre">Timer.cancel()</span></code></a>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Run <code class="docutils literal"><span class="pre">func(dt)</span></code> for the next <code class="docutils literal"><span class="pre">delay</span></code> seconds. The function is called every
time <code class="docutils literal"><span class="pre">update(dt)</span></code> is called. Optionally run <code class="docutils literal"><span class="pre">after()</span></code> once <code class="docutils literal"><span class="pre">delay</span></code>
seconds have passed.</p>
<p><code class="docutils literal"><span class="pre">after()</span></code> will receive itself as only parameter.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should not add new timers in <code class="docutils literal"><span class="pre">func(dt)</span></code>, as this can lead to random
crashes.</p>
</div>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- play an animation for 5 seconds</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">during</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span> <span class="n">animation</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- shake the camera for one second</span>
<span class="kd">local</span> <span class="n">orig_x</span><span class="p">,</span> <span class="n">orig_y</span> <span class="o">=</span> <span class="n">camera</span><span class="p">:</span><span class="n">pos</span><span class="p">()</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">during</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">lookAt</span><span class="p">(</span><span class="n">orig_x</span> <span class="o">+</span> <span class="nb">math.random</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">orig_y</span> <span class="o">+</span> <span class="nb">math.random</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="k">end</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="c1">-- reset camera position</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">lookAt</span><span class="p">(</span><span class="n">orig_x</span><span class="p">,</span> <span class="n">orig_y</span><span class="p">)</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">player</span><span class="p">.</span><span class="n">isInvincible</span> <span class="o">=</span> <span class="kc">true</span>
<span class="c1">-- flash player for 3 seconds</span>
<span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">player</span><span class="p">.</span><span class="n">timer</span><span class="p">:</span><span class="n">during</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="n">dt</span>
    <span class="n">player</span><span class="p">.</span><span class="n">visible</span> <span class="o">=</span> <span class="p">(</span><span class="n">t</span> <span class="o">%</span> <span class="mf">.2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">.1</span>
<span class="k">end</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="c1">-- make sure the player is visible after three seconds</span>
    <span class="n">player</span><span class="p">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">player</span><span class="p">.</span><span class="n">isInvincible</span> <span class="o">=</span> <span class="kc">false</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.cancel">
<code class="descclassname">Timer.</code><code class="descname">cancel</code><span class="sig-paren">(</span><em>handle</em><span class="sig-paren">)</span><a class="headerlink" href="#Timer.cancel" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>handle</strong> (<em>table</em>) &#8211; The function to be canceled.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Prevent a timer from being executed in the future.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">tick</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">tick... tock...&#39;</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">handle</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">every</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">tick</span><span class="p">)</span>
<span class="c1">-- later</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">cancel</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span> <span class="c1">-- NOT: Timer.cancel(tick)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- using a timer instance</span>
<span class="k">function</span> <span class="nf">tick</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">tick... tock...&#39;</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">handle</span> <span class="o">=</span> <span class="n">menuTimer</span><span class="p">:</span><span class="n">every</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">tick</span><span class="p">)</span>
<span class="c1">-- later</span>
<span class="n">menuTimer</span><span class="p">:</span><span class="n">cancel</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.clear">
<code class="descclassname">Timer.</code><code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Timer.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Remove all timed and periodic functions. Functions that have not yet been
executed will discarded.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Timer</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">menuTimer</span><span class="p">:</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.update">
<code class="descclassname">Timer.</code><code class="descname">update</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="headerlink" href="#Timer.update" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> (<em>number</em>) &#8211; Time that has passed since the last <code class="docutils literal"><span class="pre">update()</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Update timers and execute functions if the deadline is reached. Call in
<code class="docutils literal"><span class="pre">love.update(dt)</span></code>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">do_stuff</span><span class="p">()</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- using hump.gamestate and a timer instance</span>
<span class="k">function</span> <span class="nf">menuState</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">timers</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="Timer.tween">
<code class="descclassname">Timer.</code><code class="descname">tween</code><span class="sig-paren">(</span><em>duration</em>, <em>subject</em>, <em>target</em>, <em>method</em>, <em>after</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Timer.tween" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>duration</strong> (<em>number</em>) &#8211; Duration of the tween.</li>
<li><strong>subject</strong> (<em>table</em>) &#8211; Object to be tweened.</li>
<li><strong>target</strong> (<em>table</em>) &#8211; Target values.</li>
<li><strong>method</strong> (<em>string</em>) &#8211; Tweening method, defaults to &#8216;linear&#8217; (<a class="reference internal" href="#tweening-methods"><span>see here</span></a>, optional).</li>
<li><strong>after</strong> (<em>function</em>) &#8211; Function to execute after the tween has finished
(optiona).</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Additional arguments to the <em>tweening</em> function.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A timer handle.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><a class="reference external" href="http://en.wikipedia.org/wiki/Inbetweening">Tweening</a> (short for
in-betweening) is the process that happens between two defined states. For
example, a tween can be used to gradually fade out a graphic or move a text
message to the center of the screen. For more information why tweening should
be important to you, check out this great talk on <a class="reference external" href="http://www.youtube.com/watch?v=Fy0aCDmgnxg">juicy games</a>.</p>
<p><code class="docutils literal"><span class="pre">hump.timer</span></code> offers two interfaces for tweening: the low-level
<a class="reference internal" href="#Timer.during" title="Timer.during"><code class="xref js js-func docutils literal"><span class="pre">Timer.during()</span></code></a> and the higher level interface <a class="reference internal" href="#Timer.tween" title="Timer.tween"><code class="xref js js-func docutils literal"><span class="pre">Timer.tween()</span></code></a>.</p>
<p>To see which tweening methods hump offers, <a class="reference internal" href="#tweening-methods"><span>see below</span></a>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">load</span><span class="p">()</span>
    <span class="n">color</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="p">{</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">in-out-quad&#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">setBackgroundColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">load</span><span class="p">()</span>
    <span class="n">circle</span> <span class="o">=</span> <span class="p">{</span><span class="n">rad</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">300</span><span class="p">}}</span>
    <span class="c1">-- multiple tweens can work on the same subject</span>
    <span class="c1">-- and nested values can be tweened, too</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="p">{</span><span class="n">rad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">in-out-quad&#39;</span><span class="p">)</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="p">{</span><span class="n">pos</span> <span class="o">=</span> <span class="p">{</span><span class="n">y</span> <span class="o">=</span> <span class="mi">550</span><span class="p">}},</span> <span class="s1">&#39;</span><span class="s">out-bounce&#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">fill&#39;</span><span class="p">,</span> <span class="n">circle</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">circle</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">circle</span><span class="p">.</span><span class="n">rad</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">load</span><span class="p">()</span>
    <span class="c1">-- repeated tweening</span>

    <span class="n">circle</span> <span class="o">=</span> <span class="p">{</span><span class="n">rad</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">100</span><span class="p">}</span>
    <span class="kd">local</span> <span class="n">grow</span><span class="p">,</span> <span class="n">shrink</span><span class="p">,</span> <span class="n">move_down</span><span class="p">,</span> <span class="n">move_up</span>
    <span class="n">grow</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
        <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="p">{</span><span class="n">rad</span> <span class="o">=</span> <span class="mi">50</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">in-out-quad&#39;</span><span class="p">,</span> <span class="n">shrink</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">shrink</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
        <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="p">{</span><span class="n">rad</span> <span class="o">=</span> <span class="mi">10</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">in-out-quad&#39;</span><span class="p">,</span> <span class="n">grow</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">move_down</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
        <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span> <span class="o">=</span> <span class="mi">700</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">500</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">bounce&#39;</span><span class="p">,</span> <span class="n">move_up</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">move_up</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span>
        <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">200</span><span class="p">},</span> <span class="s1">&#39;</span><span class="s">out-elastic&#39;</span><span class="p">,</span> <span class="n">move_down</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">grow</span><span class="p">()</span>
    <span class="n">move_down</span><span class="p">()</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">Timer</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">fill&#39;</span><span class="p">,</span> <span class="n">circle</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">circle</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">circle</span><span class="p">.</span><span class="n">rad</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="tweening-methods">
<span id="id3"></span><h4>Tweening methods<a class="headerlink" href="#tweening-methods" title="Permalink to this headline">¶</a></h4>
<p>At the core of tweening lie interpolation methods. These methods define how the
output should look depending on how much time has passed. For example, consider
the following tween:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- now: player.x = 0, player.y = 0</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">player</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">})</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">player</span><span class="p">,</span> <span class="p">{</span><span class="n">y</span> <span class="o">=</span> <span class="mi">8</span><span class="p">})</span>
</pre></div>
</div>
<p>At the beginning of the tweens (no time passed), the interpolation method would
place the player at <code class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">0</span></code>. After one second, the player should be at
<code class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">2</span></code>, and after two seconds the output is <code class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">2,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">4</span></code>.</p>
<p>The actual duration of and time since starting the tween is not important, only
the fraction of the two. Similarly, the starting value and output are not
important to the interpolation method, since it can be calculated from the
start and end point. Thus an interpolation method can be fully characterized by
a function that takes a number between 0 and 1 and returns a number that
defines the output (usually also between 0 and 1). The interpolation function
must hold that the output is 0 for input 0 and 1 for input 1.</p>
<p><strong>hump</strong> predefines several commonly used interpolation methods, which are
generalized versions of <a class="reference external" href="http://www.robertpenner.com/easing/">Robert Penner&#8217;s easing
functions</a>. Those are:</p>
<p><code class="docutils literal"><span class="pre">'linear'</span></code>,
<code class="docutils literal"><span class="pre">'quad'</span></code>,
<code class="docutils literal"><span class="pre">'cubic'</span></code>,
<code class="docutils literal"><span class="pre">'quart'</span></code>,
<code class="docutils literal"><span class="pre">'quint'</span></code>,
<code class="docutils literal"><span class="pre">'sine'</span></code>,
<code class="docutils literal"><span class="pre">'expo'</span></code>,
<code class="docutils literal"><span class="pre">'circ'</span></code>,
<code class="docutils literal"><span class="pre">'back'</span></code>,
<code class="docutils literal"><span class="pre">'bounce'</span></code>, and
<code class="docutils literal"><span class="pre">'elastic'</span></code>.</p>
<p>It&#8217;s hard to understand how these functions behave by staring at a graph, so
below are some animation examples. You can change the type of the tween by
changing the selections.</p>
<div id="tween-graph"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
<script src="_static/graph-tweens.js"></script><p>Note that while the animations above show tweening of shapes, other attributes
(color, opacity, volume of a sound, ...) can be changed as well.</p>
<div class="section" id="custom-interpolators">
<h5>Custom interpolators<a class="headerlink" href="#custom-interpolators" title="Permalink to this headline">¶</a></h5>
<p>You can add custom interpolation methods by adding them to the <cite>tween</cite> table:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">.</span><span class="n">sqrt</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">return</span> <span class="nb">math.sqrt</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">end</span>
<span class="c1">-- or just Timer.tween.sqrt = math.sqrt</span>
</pre></div>
</div>
<p>Access the your method like you would the predefined ones. You can even use the
modyfing prefixes:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;</span><span class="s">in-out-sqrt&#39;</span><span class="p">,</span> <span class="n">circle</span><span class="p">,</span> <span class="p">{</span><span class="n">radius</span> <span class="o">=</span> <span class="mi">50</span><span class="p">})</span>
</pre></div>
</div>
<p>You can also invert and chain functions:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">outsqrt</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">.</span><span class="n">out</span><span class="p">(</span><span class="nb">math.sqrt</span><span class="p">)</span>
<span class="n">inoutsqrt</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">tween</span><span class="p">.</span><span class="n">chain</span><span class="p">(</span><span class="nb">math.sqrt</span><span class="p">,</span> <span class="n">outsqrt</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-vector"></span><div class="section" id="hump-vector">
<h3>hump.vector<a class="headerlink" href="#hump-vector" title="Permalink to this headline">¶</a></h3>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">vector</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">hump.vector&quot;</span>
</pre></div>
</div>
<p>A handy 2D vector class providing most of the things you do with vectors.</p>
<p>You can access the individual coordinates by <code class="docutils literal"><span class="pre">vec.x</span></code> and <code class="docutils literal"><span class="pre">vec.y</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The vectors are stored as tables. Most operations create new vectors and
thus new tables, which <em>may</em> put the garbage collector under stress.
If you experience slowdowns that are caused by hump.vector, try the
table-less version <a class="reference internal" href="index.html#document-vector-light"><em>hump.vector-light</em></a>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">player</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">delta</span> <span class="o">=</span> <span class="n">vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">left&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">delta</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elseif</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">right&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">delta</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span>  <span class="mi">1</span>
    <span class="k">end</span>
    <span class="k">if</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">up&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">delta</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elseif</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">down&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">delta</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span>  <span class="mi">1</span>
    <span class="k">end</span>
    <span class="n">delta</span><span class="p">:</span><span class="n">normalizeInplace</span><span class="p">()</span>

    <span class="n">player</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">velocity</span> <span class="o">+</span> <span class="n">delta</span> <span class="o">*</span> <span class="n">player</span><span class="p">.</span><span class="n">acceleration</span> <span class="o">*</span> <span class="n">dt</span>

    <span class="k">if</span> <span class="n">player</span><span class="p">.</span><span class="n">velocity</span><span class="p">:</span><span class="n">len</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">player</span><span class="p">.</span><span class="n">max_velocity</span> <span class="k">then</span>
        <span class="n">player</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">velocity</span><span class="p">:</span><span class="n">normalized</span><span class="p">()</span> <span class="o">*</span> <span class="n">player</span><span class="p">.</span><span class="n">max_velocity</span>
    <span class="k">end</span>

    <span class="n">player</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">position</span> <span class="o">+</span> <span class="n">player</span><span class="p">.</span><span class="n">velocity</span> <span class="o">*</span> <span class="n">dt</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="vector-arithmetic">
<h4>Vector arithmetic<a class="headerlink" href="#vector-arithmetic" title="Permalink to this headline">¶</a></h4>
<p><strong>hump</strong> provides vector arithmetic by implement the corresponding metamethods
(<code class="docutils literal"><span class="pre">__add</span></code>, <code class="docutils literal"><span class="pre">__mul</span></code>, etc.). Here are the semantics:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">vector</span> <span class="pre">+</span> <span class="pre">vector</span> <span class="pre">=</span> <span class="pre">vector</span></code></dt>
<dd>Component wise sum: \((a,b) + (x,y) = (a+x, b+y)\)</dd>
<dt><code class="docutils literal"><span class="pre">vector</span> <span class="pre">-</span> <span class="pre">vector</span> <span class="pre">=</span> <span class="pre">vector</span></code></dt>
<dd>Component wise difference: \((a,b) - (x,y) = (a-x, b-y)\)</dd>
<dt><code class="docutils literal"><span class="pre">vector</span> <span class="pre">*</span> <span class="pre">vector</span> <span class="pre">=</span> <span class="pre">number</span></code></dt>
<dd>Dot product: \((a,b) \cdot  (x,y) = a\cdot x + b\cdot y\)</dd>
<dt><code class="docutils literal"><span class="pre">number</span> <span class="pre">*</span> <span class="pre">vector</span> <span class="pre">=</span> <span class="pre">vector</span></code></dt>
<dd>Scalar multiplication/scaling: \((a,b) \cdot  s = (s\cdot a, s\cdot b)\)</dd>
<dt><code class="docutils literal"><span class="pre">vector</span> <span class="pre">*</span> <span class="pre">number</span> <span class="pre">=</span> <span class="pre">vector</span></code></dt>
<dd>Scalar multiplication/scaling: \(s \cdot  (x,y) = (s\cdot x, s\cdot y)\)</dd>
<dt><code class="docutils literal"><span class="pre">vector</span> <span class="pre">/</span> <span class="pre">number</span> <span class="pre">=</span> <span class="pre">vector</span></code></dt>
<dd>Scalar multiplication/scaling: \((a,b) / s = (a/s, b/s)\).</dd>
</dl>
<p>Common relations are also defined:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">b</span></code></dt>
<dd>Same as <code class="docutils literal"><span class="pre">a.x</span> <span class="pre">==</span> <span class="pre">b.x</span> <span class="pre">and</span> <span class="pre">a.y</span> <span class="pre">==</span> <span class="pre">b.y</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code></dt>
<dd>Same as <code class="docutils literal"><span class="pre">a.x</span> <span class="pre">&lt;=</span> <span class="pre">b.x</span> <span class="pre">and</span> <span class="pre">a.y</span> <span class="pre">&lt;=</span> <span class="pre">b.y</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span></code></dt>
<dd>Lexicographical order: <code class="docutils literal"><span class="pre">a.x</span> <span class="pre">&lt;</span> <span class="pre">b.x</span> <span class="pre">or</span> <span class="pre">(a.x</span> <span class="pre">==</span> <span class="pre">b.x</span> <span class="pre">and</span> <span class="pre">a.y</span> <span class="pre">&lt;</span> <span class="pre">b.y)</span></code>.</dd>
</dl>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- acceleration, player.velocity and player.position are vectors</span>
<span class="n">acceleration</span> <span class="o">=</span> <span class="n">vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">9</span><span class="p">)</span>
<span class="n">player</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">velocity</span> <span class="o">+</span> <span class="n">acceleration</span> <span class="o">*</span> <span class="n">dt</span>
<span class="n">player</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">position</span> <span class="o">+</span> <span class="n">player</span><span class="p">.</span><span class="n">velocity</span> <span class="o">*</span> <span class="n">dt</span>
</pre></div>
</div>
</div>
<div class="section" id="function-reference">
<h4>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="vector.new">
<code class="descclassname">vector.</code><code class="descname">new</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.new" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; Coordinates.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Create a new vector.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- as a shortcut, you can call the module like a function:</span>
<span class="n">vector</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">hump.vector&quot;</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">vector</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.isvector">
<code class="descclassname">vector.</code><code class="descname">isvector</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.isvector" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>v</strong> (<em>mixed</em>) &#8211; The variable to test.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">true</span></code> if <code class="docutils literal"><span class="pre">v</span></code> is a vector, <code class="docutils literal"><span class="pre">false</span></code> otherwise.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Test whether a variable is a vector.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">vector</span><span class="p">.</span><span class="n">isvector</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">then</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:clone">
<code class="descname">vector:clone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vector:clone" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Copy of the vector.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Copy a vector.  Assigning a vector to a variable will create a <em>reference</em>, so
when modifying the vector referenced by the new variable would also change the
old one:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">-- create vector</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>           <span class="c1">-- b references a</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="p">:</span><span class="n">clone</span><span class="p">()</span>   <span class="c1">-- c is a copy of a</span>
<span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>         <span class="c1">-- changes a,b and c</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>    <span class="c1">-- prints &#39;(1,0), (1,0), (1,1)&#39;</span>
</pre></div>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">copy</span> <span class="o">=</span> <span class="n">original</span><span class="p">:</span><span class="n">clone</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:unpack">
<code class="descname">vector:unpack</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vector:unpack" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The coordinates <code class="docutils literal"><span class="pre">x,y</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Extract coordinates.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">pos</span><span class="p">:</span><span class="nb">unpack</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">image</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span><span class="p">:</span><span class="nb">unpack</span><span class="p">())</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:permul">
<code class="descname">vector:permul</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:permul" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>other</strong> (<em>vector</em>) &#8211; The second source vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Vector whose components are products of the source vectors.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Multiplies vectors coordinate wise, i.e. <code class="docutils literal"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">vector(a.x</span> <span class="pre">*</span> <span class="pre">b.x,</span> <span class="pre">a.y</span> <span class="pre">*</span>
<span class="pre">b.y)</span></code>.</p>
<p>Does not change either argument vectors, but creates a new one.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- scale with different magnitudes</span>
<span class="n">scaled</span> <span class="o">=</span> <span class="n">original</span><span class="p">:</span><span class="n">permul</span><span class="p">(</span><span class="n">vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">1.5</span><span class="p">))</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:len">
<code class="descname">vector:len</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vector:len" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Length of the vector.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get length of the vector, i.e. <code class="docutils literal"><span class="pre">math.sqrt(vec.x</span> <span class="pre">*</span> <span class="pre">vec.x</span> <span class="pre">+</span> <span class="pre">vec.y</span> <span class="pre">*</span> <span class="pre">vec.y)</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">distance</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">):</span><span class="n">len</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:len2">
<code class="descname">vector:len2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vector:len2" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Squared length of the vector.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get squared length of the vector, i.e. <code class="docutils literal"><span class="pre">vec.x</span> <span class="pre">*</span> <span class="pre">vec.x</span> <span class="pre">+</span> <span class="pre">vec.y</span> <span class="pre">*</span> <span class="pre">vec.y</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- get closest vertex to a given vector</span>
<span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">pos</span> <span class="o">-</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span><span class="n">len2</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="o">#</span><span class="n">vertices</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">temp</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos</span> <span class="o">-</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span><span class="n">len2</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">&lt;</span> <span class="n">dsq</span> <span class="k">then</span>
        <span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">temp</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:dist">
<code class="descname">vector:dist</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:dist" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>other</strong> (<em>vector</em>) &#8211; Other vector to measure the distance to.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The distance of the vectors.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get distance of two vectors. The same as <code class="docutils literal"><span class="pre">(a</span> <span class="pre">-</span> <span class="pre">b):len()</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- get closest vertex to a given vector</span>
<span class="c1">-- slightly slower than the example using len2()</span>
<span class="n">closest</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">:</span><span class="n">dist</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="o">#</span><span class="n">vertices</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">pos</span><span class="p">:</span><span class="n">dist</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">&lt;</span> <span class="n">dist</span> <span class="k">then</span>
        <span class="n">closest</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">temp</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:dist2">
<code class="descname">vector:dist2</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:dist2" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>other</strong> (<em>vector</em>) &#8211; Other vector to measure the distance to.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The squared distance of the vectors.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get squared distance of two vectors. The same as <code class="docutils literal"><span class="pre">(a</span> <span class="pre">-</span> <span class="pre">b):len2()</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- get closest vertex to a given vector</span>
<span class="c1">-- slightly faster than the example using len2()</span>
<span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">:</span><span class="n">dist2</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="o">#</span><span class="n">vertices</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">pos</span><span class="p">:</span><span class="n">dist2</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">&lt;</span> <span class="n">dsq</span> <span class="k">then</span>
        <span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">temp</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:normalized">
<code class="descname">vector:normalized</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vector:normalized" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Vector with same direction as the input vector, but length 1.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get normalized vector: a vector with the same direction as the input vector,
but with length 1.</p>
<p>Does not change the input vector, but creates a new vector.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">direction</span> <span class="o">=</span> <span class="n">velocity</span><span class="p">:</span><span class="n">normalized</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:normalizeInplace">
<code class="descname">vector:normalizeInplace</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vector:normalizeInplace" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Itself &#8211; the normalized vector</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Normalize a vector, i.e. make the vector to have length 1. Great to use on
intermediate results.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This modifies the vector. If in doubt, use <a class="reference internal" href="#vector:normalized" title="vector:normalized"><code class="xref js js-func docutils literal"><span class="pre">vector:normalized()</span></code></a>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">normal</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">):</span><span class="n">perpendicular</span><span class="p">():</span><span class="n">normalizeInplace</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:rotated">
<code class="descname">vector:rotated</code><span class="sig-paren">(</span><em>angle</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:rotated" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>angle</strong> (<em>number</em>) &#8211; Rotation angle in radians.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The rotated vector</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get a vector with same length, but rotated by <code class="docutils literal"><span class="pre">angle</span></code>:</p>
<img alt="Sketch of rotated vector." src="_images/vector-rotated.png" />
<p>Does not change the input vector, but creates a new vector.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- approximate a circle</span>
<span class="n">circle</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">30</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">phi</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">math.pi</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">30</span>
    <span class="n">circle</span><span class="p">[</span><span class="o">#</span><span class="n">circle</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="n">rotated</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:rotateInplace">
<code class="descname">vector:rotateInplace</code><span class="sig-paren">(</span><em>angle</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:rotateInplace" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>angle</strong> (<em>number</em>) &#8211; Rotation angle in radians.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Itself &#8211; the rotated vector</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Rotate a vector in-place. Great to use on intermediate results.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Yhis modifies the vector. If in doubt, use <a class="reference internal" href="#vector:rotated" title="vector:rotated"><code class="xref js js-func docutils literal"><span class="pre">vector:rotated()</span></code></a>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- ongoing rotation</span>
<span class="n">spawner</span><span class="p">.</span><span class="n">direction</span><span class="p">:</span><span class="n">rotateInplace</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:perpendicular">
<code class="descname">vector:perpendicular</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vector:perpendicular" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A vector perpendicular to the input vector</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Quick rotation by 90°. Creates a new vector. The same (but faster) as
<code class="docutils literal"><span class="pre">vec:rotate(math.pi/2)</span></code>:</p>
<img alt="Sketch of two perpendicular vectors" src="_images/vector-perpendicular.png" />
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">normal</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">):</span><span class="n">perpendicular</span><span class="p">():</span><span class="n">normalizeInplace</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:projectOn">
<code class="descname">vector:projectOn</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:projectOn" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>v</strong> (<em>vector</em>) &#8211; The vector to project on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">vector</span></code>  The projected vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Project vector onto another vector:</p>
<img alt="Sketch of vector projection." src="_images/vector-projectOn.png" />
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">velocity_component</span> <span class="o">=</span> <span class="n">velocity</span><span class="p">:</span><span class="n">projectOn</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:mirrorOn">
<code class="descname">vector:mirrorOn</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:mirrorOn" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>v</strong> (<em>vector</em>) &#8211; The vector to mirror on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The mirrored vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Mirrors vector on the axis defined by the other vector:</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">deflected_velocity</span> <span class="o">=</span> <span class="n">ball</span><span class="p">.</span><span class="n">velocity</span><span class="p">:</span><span class="n">mirrorOn</span><span class="p">(</span><span class="n">surface_normal</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:cross">
<code class="descname">vector:cross</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:cross" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>other</strong> (<em>vector</em>) &#8211; Vector to compute the cross product with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">number</span></code>  Cross product of both vectors.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get cross product of two vectors. Equals the area of the parallelogram spanned
by both vectors.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">parallelogram_area</span> <span class="o">=</span> <span class="n">a</span><span class="p">:</span><span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:angleTo">
<code class="descname">vector:angleTo</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:angleTo" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>other</strong> (<em>vector</em>) &#8211; Vector to measure the angle to (optional).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Angle in radians.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Measures the angle between two vectors. If <code class="docutils literal"><span class="pre">other</span></code> is omitted it defaults
to the vector <code class="docutils literal"><span class="pre">(0,0)</span></code>, i.e. the function returns the angle to the coordinate
system.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">lean</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">upvector</span><span class="p">:</span><span class="n">angleTo</span><span class="p">(</span><span class="n">vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="k">if</span> <span class="n">lean</span> <span class="o">&gt;</span> <span class="mf">.1</span> <span class="k">then</span> <span class="n">self</span><span class="p">:</span><span class="n">fallOver</span><span class="p">()</span> <span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:trimmed">
<code class="descname">vector:trimmed</code><span class="sig-paren">(</span><em>max_length</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:trimmed" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>max_length</strong> (<em>number</em>) &#8211; Maximum allowed length of the vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A trimmed vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Trim the vector to <code class="docutils literal"><span class="pre">max_length</span></code>, i.e. return a vector that points in the same
direction as the source vector, but has a magnitude smaller or equal to
<code class="docutils literal"><span class="pre">max_length</span></code>.</p>
<p>Does not change the input vector, but creates a new vector.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">ship</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="n">ship</span><span class="p">.</span><span class="n">force</span> <span class="o">*</span> <span class="n">ship</span><span class="p">.</span><span class="n">mass</span> <span class="o">*</span> <span class="n">dt</span>
<span class="n">ship</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="n">ship</span><span class="p">.</span><span class="n">velocity</span><span class="p">:</span><span class="n">trimmed</span><span class="p">(</span><span class="mi">299792458</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector:trimInplace">
<code class="descname">vector:trimInplace</code><span class="sig-paren">(</span><em>max_length</em><span class="sig-paren">)</span><a class="headerlink" href="#vector:trimInplace" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>max_length</strong> (<em>number</em>) &#8211; Maximum allowed length of the vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Itself &#8211; the trimmed vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Trim the vector to <code class="docutils literal"><span class="pre">max_length</span></code>, i.e. return a vector that points in the same
direction as the source vector, but has a magnitude smaller or equal to
<code class="docutils literal"><span class="pre">max_length</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Yhis modifies the vector. If in doubt, use <a class="reference internal" href="#vector:trimmed" title="vector:trimmed"><code class="xref js js-func docutils literal"><span class="pre">vector:trimmed()</span></code></a>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">ship</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="p">(</span><span class="n">ship</span><span class="p">.</span><span class="n">velocity</span> <span class="o">+</span> <span class="n">ship</span><span class="p">.</span><span class="n">force</span> <span class="o">*</span> <span class="n">ship</span><span class="p">.</span><span class="n">mass</span> <span class="o">*</span> <span class="n">dt</span><span class="p">):</span><span class="n">trimInplace</span><span class="p">(</span><span class="mi">299792458</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-vector-light"></span><div class="section" id="hump-vector-light">
<h3>hump.vector-light<a class="headerlink" href="#hump-vector-light" title="Permalink to this headline">¶</a></h3>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">vector</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">hump.vector-light&quot;</span>
</pre></div>
</div>
<p>An table-free version of <a class="reference internal" href="index.html#document-vector"><em>hump.vector</em></a>. Instead of a vector type,
<code class="docutils literal"><span class="pre">hump.vector-light</span></code> provides functions that operate on numbers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using this module instead of <a class="reference internal" href="index.html#document-vector"><em>hump.vector</em></a> may result in
faster code, but does so at the expense of speed of development and code
readability.  Unless you are absolutely sure that your code is
significantly slowed down by <a class="reference internal" href="index.html#document-vector"><em>hump.vector</em></a>, I recommend using
it instead.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">player</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">dx</span><span class="p">,</span><span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
    <span class="k">if</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">left&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elseif</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">right&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">dx</span> <span class="o">=</span>  <span class="mi">1</span>
    <span class="k">end</span>
    <span class="k">if</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">up&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elseif</span> <span class="n">love</span><span class="p">.</span><span class="n">keyboard</span><span class="p">.</span><span class="n">isDown</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">down&#39;</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">dy</span> <span class="o">=</span>  <span class="mi">1</span>
    <span class="k">end</span>
    <span class="n">dx</span><span class="p">,</span><span class="n">dy</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>

    <span class="n">player</span><span class="p">.</span><span class="n">velx</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">vely</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">velx</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">vely</span><span class="p">,</span>
                                    <span class="n">vector</span><span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="n">dy</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">vector</span><span class="p">.</span><span class="n">len</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">velx</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">vely</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">player</span><span class="p">.</span><span class="n">max_velocity</span> <span class="k">then</span>
        <span class="n">player</span><span class="p">.</span><span class="n">velx</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">vely</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">max_velocity</span><span class="p">,</span>
                            <span class="n">vector</span><span class="p">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">velx</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">vely</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">player</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">player</span><span class="p">.</span><span class="n">velx</span>
    <span class="n">player</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">player</span><span class="p">.</span><span class="n">vely</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="function-reference">
<h4>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="vector.str">
<code class="descclassname">vector.</code><code class="descname">str</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.str" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The string representation.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Produce a human-readable string of the form <code class="docutils literal"><span class="pre">(x,y)</span></code>.
Useful for debugging.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">vector</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="n">love</span><span class="p">.</span><span class="n">mouse</span><span class="p">.</span><span class="n">getPosition</span><span class="p">()))</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.mul">
<code class="descclassname">vector.</code><code class="descname">mul</code><span class="sig-paren">(</span><em>s</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.mul" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>s</strong> (<em>number</em>) &#8211; A scalar.</li>
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; A vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x*s,</span> <span class="pre">y*s</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Computes <code class="docutils literal"><span class="pre">x*s,y*s</span></code>. The order of arguments is chosen so that it&#8217;s possible to
chain operations (see example).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">velx</span><span class="p">,</span><span class="n">vely</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">vec</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">velx</span><span class="p">,</span><span class="n">vely</span><span class="p">,</span> <span class="n">accx</span><span class="p">,</span><span class="n">accy</span><span class="p">))</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.div">
<code class="descclassname">vector.</code><code class="descname">div</code><span class="sig-paren">(</span><em>s</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.div" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>s</strong> (<em>number</em>) &#8211; A scalar.</li>
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; A vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x/s,</span> <span class="pre">y/s</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Computes <code class="docutils literal"><span class="pre">x/s,y/s</span></code>. The order of arguments is chosen so that it&#8217;s possible to
chain operations (see example).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">div</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">zoom</span><span class="p">,</span> <span class="n">x</span><span class="o">-</span><span class="n">w</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="n">h</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.add">
<code class="descclassname">vector.</code><code class="descname">add</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.add" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1+x2,</span> <span class="pre">x1+x2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Computes the sum \((x1+x2, y1+y2)\)`` of two vectors. Meant to be used in
conjunction with other functions like <a class="reference internal" href="#vector.mul" title="vector.mul"><code class="xref js js-func docutils literal"><span class="pre">vector.mul()</span></code></a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">player</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">player</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">vector</span><span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">))</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.sub">
<code class="descclassname">vector.</code><code class="descname">sub</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.sub" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1-x2,</span> <span class="pre">x1-x2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Computes the difference \((x1-x2, y1-y2)\) of two vectors. Meant to be used in
conjunction with other functions like <a class="reference internal" href="#vector.mul" title="vector.mul"><code class="xref js js-func docutils literal"><span class="pre">vector.mul()</span></code></a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span> <span class="n">love</span><span class="p">.</span><span class="n">mouse</span><span class="p">.</span><span class="n">getPosition</span><span class="p">())</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.permul">
<code class="descclassname">vector.</code><code class="descname">permul</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.permul" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1*x2,</span> <span class="pre">y1*y2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Component-wise multiplication, i.e.: <code class="docutils literal"><span class="pre">x1*x2,</span> <span class="pre">y1*y2</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">permul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mf">1.5</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.dot">
<code class="descclassname">vector.</code><code class="descname">dot</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.dot" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1*x2</span> <span class="pre">+</span> <span class="pre">y1*y2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Computes the <a class="reference external" href="http://en.wikipedia.org/wiki/Dot_product">dot product</a> of two
vectors: <code class="docutils literal"><span class="pre">x1*x2</span> <span class="pre">+</span> <span class="pre">y1*y2</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">cosphi</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="n">rx</span><span class="p">,</span><span class="n">ry</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span><span class="n">vy</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.cross">
<code class="descclassname">vector.</code><code class="descname">cross</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.cross" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1*y2</span> <span class="pre">-</span> <span class="pre">y1*x2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Computes the <a class="reference external" href="http://en.wikipedia.org/wiki/Cross_product">cross product</a> of
two vectors: <code class="docutils literal"><span class="pre">x1*y2</span> <span class="pre">-</span> <span class="pre">y1*x2</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">parallelogram_area</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">cross</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span><span class="n">ay</span><span class="p">,</span> <span class="n">bx</span><span class="p">,</span><span class="n">by</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.vector.det">
<code class="descclassname">vector.vector.</code><code class="descname">det</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.vector.det" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1*y2</span> <span class="pre">-</span> <span class="pre">y1*x2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Alias to <a class="reference internal" href="#vector.cross" title="vector.cross"><code class="xref js js-func docutils literal"><span class="pre">vector.cross()</span></code></a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">parallelogram_area</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">det</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span><span class="n">ay</span><span class="p">,</span> <span class="n">bx</span><span class="p">,</span><span class="n">by</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.eq">
<code class="descclassname">vector.</code><code class="descname">eq</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.eq" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1</span> <span class="pre">==</span> <span class="pre">x2</span> <span class="pre">and</span> <span class="pre">y1</span> <span class="pre">==</span> <span class="pre">y2</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Test for equality.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">vector</span><span class="p">.</span><span class="n">eq</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">)</span> <span class="k">then</span> <span class="n">be</span><span class="p">.</span><span class="n">happy</span><span class="p">()</span> <span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.le">
<code class="descclassname">vector.</code><code class="descname">le</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.le" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1</span> <span class="pre">&lt;=</span> <span class="pre">x2</span> <span class="pre">and</span> <span class="pre">y1</span> <span class="pre">&lt;=</span> <span class="pre">y2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Test for partial lexicographical order, <code class="docutils literal"><span class="pre">&lt;=</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">vector</span><span class="p">.</span><span class="n">le</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">)</span> <span class="k">then</span> <span class="n">be</span><span class="p">.</span><span class="n">happy</span><span class="p">()</span> <span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.lt">
<code class="descclassname">vector.</code><code class="descname">lt</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.lt" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x1</span> <span class="pre">&lt;</span> <span class="pre">x2</span> <span class="pre">or</span> <span class="pre">(x1</span> <span class="pre">==</span> <span class="pre">x2)</span> <span class="pre">and</span> <span class="pre">y1</span> <span class="pre">&lt;=</span> <span class="pre">y2</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Test for strict lexicographical order, <code class="docutils literal"><span class="pre">&lt;</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">vector</span><span class="p">.</span><span class="n">lt</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">)</span> <span class="k">then</span> <span class="n">be</span><span class="p">.</span><span class="n">happy</span><span class="p">()</span> <span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.len">
<code class="descclassname">vector.</code><code class="descname">len</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.len" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Length of the vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get length of a vector, i.e. <code class="docutils literal"><span class="pre">math.sqrt(x*x</span> <span class="pre">+</span> <span class="pre">y*y)</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">distance</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">len</span><span class="p">(</span><span class="n">love</span><span class="p">.</span><span class="n">mouse</span><span class="p">.</span><span class="n">getPosition</span><span class="p">())</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.len2">
<code class="descclassname">vector.</code><code class="descname">len2</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.len2" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Squared length of the vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get squared length of a vector, i.e. <code class="docutils literal"><span class="pre">x*x</span> <span class="pre">+</span> <span class="pre">y*y</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- get closest vertex to a given vector</span>
<span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vector</span><span class="p">.</span><span class="n">len2</span><span class="p">(</span><span class="n">px</span><span class="o">-</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="o">#</span><span class="n">vertices</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">len2</span><span class="p">(</span><span class="n">px</span><span class="o">-</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">py</span><span class="o">-</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">&lt;</span> <span class="n">dsq</span> <span class="k">then</span>
        <span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">temp</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.dist">
<code class="descclassname">vector.</code><code class="descname">dist</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.dist" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The distance of the points.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get distance of two points. The same as <code class="docutils literal"><span class="pre">vector.len(x1-x2,</span> <span class="pre">y1-y2)</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- get closest vertex to a given vector</span>
<span class="c1">-- slightly slower than the example using len2()</span>
<span class="n">closest</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vector</span><span class="p">.</span><span class="n">dist</span><span class="p">(</span><span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">,</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="o">#</span><span class="n">vertices</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">dist</span><span class="p">(</span><span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">,</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">&lt;</span> <span class="n">dist</span> <span class="k">then</span>
        <span class="n">closest</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">temp</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.dist2">
<code class="descclassname">vector.</code><code class="descname">dist2</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.dist2" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x1,y1</strong> (<em>numbers</em>) &#8211; First vector.</li>
<li><strong>x2,y2</strong> (<em>numbers</em>) &#8211; Second vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The squared distance of two points.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get squared distance of two points. The same as <code class="docutils literal"><span class="pre">vector.len2(x1-x2,</span> <span class="pre">y1-y2)</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- get closest vertex to a given vector</span>
<span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vector</span><span class="p">.</span><span class="n">dist2</span><span class="p">(</span><span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">,</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="o">#</span><span class="n">vertices</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">dist2</span><span class="p">(</span><span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">,</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">&lt;</span> <span class="n">dsq</span> <span class="k">then</span>
        <span class="n">closest</span><span class="p">,</span> <span class="n">dsq</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">temp</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.normalize">
<code class="descclassname">vector.</code><code class="descname">normalize</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.normalize" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Vector with same direction as the input vector, but length 1.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get normalized vector, i.e. a vector with the same direction as the input
vector, but with length 1.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">vx</span><span class="p">,</span><span class="n">vy</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.rotate">
<code class="descclassname">vector.</code><code class="descname">rotate</code><span class="sig-paren">(</span><em>phi</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.rotate" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>phi</strong> (<em>number</em>) &#8211; Rotation angle in radians.</li>
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The rotated vector</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Get a rotated vector.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- approximate a circle</span>
<span class="n">circle</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">30</span> <span class="k">do</span>
    <span class="kd">local</span> <span class="n">phi</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">math.pi</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">30</span>
    <span class="n">circle</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">circle</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.perpendicular">
<code class="descclassname">vector.</code><code class="descname">perpendicular</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.perpendicular" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A vector perpendicular to the input vector</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Quick rotation by 90°. The same (but faster) as <code class="docutils literal"><span class="pre">vector.rotate(math.pi/2,</span> <span class="pre">x,y)</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">nx</span><span class="p">,</span><span class="n">ny</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">vector</span><span class="p">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">bx</span><span class="o">-</span><span class="n">ax</span><span class="p">,</span> <span class="n">by</span><span class="o">-</span><span class="n">ay</span><span class="p">))</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.project">
<code class="descclassname">vector.</code><code class="descname">project</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>u</em>, <em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.project" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector to project.</li>
<li><strong>u,v</strong> (<em>numbers</em>) &#8211; The vector to project onto.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The projected vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Project vector onto another vector.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">vx_p</span><span class="p">,</span><span class="n">vy_p</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">project</span><span class="p">(</span><span class="n">vx</span><span class="p">,</span><span class="n">vy</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span><span class="n">ay</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.mirror">
<code class="descclassname">vector.</code><code class="descname">mirror</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>u</em>, <em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.mirror" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; The vector to mirror.</li>
<li><strong>u,v</strong> (<em>numbers</em>) &#8211; The vector defining the axis.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The mirrored vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Mirrors vector on the axis defined by the other vector.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">vx</span><span class="p">,</span><span class="n">vy</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">mirror</span><span class="p">(</span><span class="n">vx</span><span class="p">,</span><span class="n">vy</span><span class="p">,</span> <span class="n">surface</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">surface</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.angleTo">
<code class="descclassname">vector.</code><code class="descname">angleTo</code><span class="sig-paren">(</span><em>ox</em>, <em>y</em>, <em>u</em>, <em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.angleTo" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; Vector to measure the angle.</li>
<li><strong>u,v (optional)</strong> (<em>numbers</em>) &#8211; Reference vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Angle in radians.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Measures the angle between two vectors. <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> default to <code class="docutils literal"><span class="pre">0</span></code> if omitted,
i.e. the function returns the angle to the coordinate system.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">lean</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">angleTo</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">upx</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">upy</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="k">if</span> <span class="n">lean</span> <span class="o">&gt;</span> <span class="mf">.1</span> <span class="k">then</span> <span class="n">self</span><span class="p">:</span><span class="n">fallOver</span><span class="p">()</span> <span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="vector.trim">
<code class="descclassname">vector.</code><code class="descname">trim</code><span class="sig-paren">(</span><em>max_length</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#vector.trim" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>max_length</strong> (<em>number</em>) &#8211; Maximum allowed length of the vector.</li>
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; Vector to trum.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The trimmed vector.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Trim the vector to <code class="docutils literal"><span class="pre">max_length</span></code>, i.e. return a vector that points in the same
direction as the source vector, but has a magnitude smaller or equal to
<code class="docutils literal"><span class="pre">max_length</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">vel_x</span><span class="p">,</span> <span class="n">vel_y</span> <span class="o">=</span> <span class="n">vector</span><span class="p">.</span><span class="n">trim</span><span class="p">(</span><span class="mi">299792458</span><span class="p">,</span>
                           <span class="n">vector</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">vel_x</span><span class="p">,</span> <span class="n">vel_y</span><span class="p">,</span>
                                      <span class="n">vector</span><span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="n">mass</span> <span class="o">*</span> <span class="n">dt</span><span class="p">,</span> <span class="n">force_x</span><span class="p">,</span> <span class="n">force_y</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<span id="document-class"></span><div class="section" id="hump-class">
<h3>hump.class<a class="headerlink" href="#hump-class" title="Permalink to this headline">¶</a></h3>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">hump.class&quot;</span>
</pre></div>
</div>
<p>A small, fast class/prototype implementation with multiple inheritance.</p>
<p>Implements <a class="reference external" href="https://github.com/bartbes/Class-Commons">class commons</a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Critter</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span>
    <span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span>
        <span class="n">self</span><span class="p">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">img</span>
    <span class="k">end</span><span class="p">,</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">Critter</span><span class="p">:</span><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">player</span><span class="p">)</span>
    <span class="c1">-- see hump.vector</span>
    <span class="kd">local</span> <span class="n">dir</span> <span class="o">=</span> <span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">pos</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span><span class="p">):</span><span class="n">normalize_inplace</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span> <span class="o">+</span> <span class="n">dir</span> <span class="o">*</span> <span class="n">Critter</span><span class="p">.</span><span class="n">speed</span> <span class="o">*</span> <span class="n">dt</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">Critter</span><span class="p">:</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">img</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="function-reference">
<h4>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="Class.new">
<code class="descclassname">Class.</code><code class="descname">new</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Class.new" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="descclassname">Class.</code><code class="descname">new</code><span class="sig-paren">(</span><em>{init = constructor</em>, <em>__includes = parents</em>, <em>...}</em><span class="sig-paren">)</span></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>constructor</strong> (<em>function</em>) &#8211; Class constructor. Can be accessed with <code class="docutils literal"><span class="pre">theclass.init(object,</span> <span class="pre">...)</span></code>. (optional)</li>
<li><strong>or table of classes parents</strong> (<em>class</em>) &#8211; Classes to inherit from. Can either be a single class or a table of classes. (optional)</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Any other fields or methods common to all instances of this class. (optional)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The class.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Declare a new class.</p>
<p><code class="docutils literal"><span class="pre">init()</span></code> will receive the new object instance as first argument. Any other
arguments will also be forwarded (see examples), i.e. <code class="docutils literal"><span class="pre">init()</span></code> has the
following signature:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>If you do not specify a constructor, an empty constructor will be used instead.</p>
<p>The name of the variable that holds the module can be used as a shortcut to
<code class="docutils literal"><span class="pre">new()</span></code> (see example).</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span> <span class="c1">-- `Class&#39; is now a shortcut to new()</span>

<span class="c1">-- define a class class</span>
<span class="n">Feline</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span>
    <span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">self</span><span class="p">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
    <span class="k">end</span><span class="p">;</span>
    <span class="c1">-- define a method</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">size: %.02f, weight: %.02f&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">weight</span><span class="p">)</span>
    <span class="k">end</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">-- create two objects</span>
<span class="n">garfield</span> <span class="o">=</span> <span class="n">Feline</span><span class="p">(</span><span class="mf">.7</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
<span class="n">felix</span> <span class="o">=</span> <span class="n">Feline</span><span class="p">(</span><span class="mf">.8</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">Garfield: &quot;</span> <span class="o">..</span> <span class="n">garfield</span><span class="p">:</span><span class="n">stats</span><span class="p">(),</span> <span class="s2">&quot;</span><span class="s">Felix: &quot;</span> <span class="o">..</span> <span class="n">felix</span><span class="p">:</span><span class="n">stats</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>

<span class="c1">-- same as above, but with &#39;external&#39; function definitions</span>
<span class="n">Feline</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{}</span>

<span class="k">function</span> <span class="nf">Feline</span><span class="p">:</span><span class="n">init</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
    <span class="n">self</span><span class="p">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nf">Feline</span><span class="p">:</span><span class="n">stats</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">size: %.02f, weight: %.02f&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">weight</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">garfield</span> <span class="o">=</span> <span class="n">Feline</span><span class="p">(</span><span class="mf">.7</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Feline</span><span class="p">,</span> <span class="n">garfield</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">foo&#39;</span><span class="p">)</span> <span class="k">end</span>
<span class="p">}</span>

<span class="n">B</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">bar&#39;</span><span class="p">)</span> <span class="k">end</span>
<span class="p">}</span>

<span class="c1">-- single inheritance</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span><span class="n">__includes</span> <span class="o">=</span> <span class="n">A</span><span class="p">}</span>
<span class="n">instance</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="n">instance</span><span class="p">:</span><span class="n">foo</span><span class="p">()</span> <span class="c1">-- prints &#39;foo&#39;</span>
<span class="n">instance</span><span class="p">:</span><span class="n">bar</span><span class="p">()</span> <span class="c1">-- error: function not defined</span>

<span class="c1">-- multiple inheritance</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span><span class="n">__includes</span> <span class="o">=</span> <span class="p">{</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">}}</span>
<span class="n">instance</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>
<span class="n">instance</span><span class="p">:</span><span class="n">foo</span><span class="p">()</span> <span class="c1">-- prints &#39;foo&#39;</span>
<span class="n">instance</span><span class="p">:</span><span class="n">bar</span><span class="p">()</span> <span class="c1">-- prints &#39;bar&#39;</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- class attributes are shared across instances</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span> <span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">foo&#39;</span> <span class="p">}</span> <span class="c1">-- foo is a class attribute/static member</span>

<span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="p">,</span> <span class="n">three</span> <span class="o">=</span> <span class="n">A</span><span class="p">(),</span> <span class="n">A</span><span class="p">(),</span> <span class="n">A</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">one</span><span class="p">.</span><span class="n">foo</span><span class="p">,</span> <span class="n">two</span><span class="p">.</span><span class="n">foo</span><span class="p">,</span> <span class="n">three</span><span class="p">.</span><span class="n">foo</span><span class="p">)</span> <span class="c1">--&gt; prints &#39;foo    foo    foo&#39;</span>

<span class="n">one</span><span class="p">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">bar&#39;</span> <span class="c1">-- overwrite/specify for instance `one&#39; only</span>
<span class="nb">print</span><span class="p">(</span><span class="n">one</span><span class="p">.</span><span class="n">foo</span><span class="p">,</span> <span class="n">two</span><span class="p">.</span><span class="n">foo</span><span class="p">,</span> <span class="n">three</span><span class="p">.</span><span class="n">foo</span><span class="p">)</span> <span class="c1">--&gt; prints &#39;bar    foo    foo&#39;</span>

<span class="n">A</span><span class="p">.</span><span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">baz&#39;</span> <span class="c1">-- overwrite for all instances without specification</span>
<span class="nb">print</span><span class="p">(</span><span class="n">one</span><span class="p">.</span><span class="n">foo</span><span class="p">,</span> <span class="n">two</span><span class="p">.</span><span class="n">foo</span><span class="p">,</span> <span class="n">three</span><span class="p">.</span><span class="n">foo</span><span class="p">)</span> <span class="c1">--&gt; prints &#39;bar    baz    baz&#39;</span>
</pre></div>
</div>
<dl class="function">
<dt id="class.init">
<code class="descclassname">class.</code><code class="descname">init</code><span class="sig-paren">(</span><em>object</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#class.init" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>object</strong> (<em>Object</em>) &#8211; The object. Usually <code class="docutils literal"><span class="pre">self</span></code>.</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Arguments to pass to the constructor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Whatever the parent class constructor returns.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Calls class constructor of a class on an object.</p>
<p>Derived classes should use this function their constructors to initialize the
parent class(es) portions of the object.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>

<span class="n">Shape</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span>
    <span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">area</span> <span class="o">=</span> <span class="n">area</span>
    <span class="k">end</span><span class="p">;</span>
    <span class="n">__tostring</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="s">area = &quot;</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">area</span>
    <span class="k">end</span>
<span class="p">}</span>

<span class="n">Rectangle</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span><span class="n">__includes</span> <span class="o">=</span> <span class="n">Shape</span><span class="p">,</span>
    <span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">Shape</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">width</span> <span class="o">*</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">width</span>  <span class="o">=</span> <span class="n">width</span>
        <span class="n">self</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
    <span class="k">end</span><span class="p">;</span>
    <span class="n">__tostring</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">strs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;</span><span class="s">width = &quot;</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">width</span><span class="p">,</span>
            <span class="s2">&quot;</span><span class="s">height = &quot;</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">height</span><span class="p">,</span>
            <span class="n">Shape</span><span class="p">.</span><span class="n">__tostring</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">table.concat</span><span class="p">(</span><span class="n">strs</span><span class="p">,</span> <span class="s2">&quot;</span><span class="s">, &quot;</span><span class="p">)</span>
    <span class="k">end</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="p">)</span> <span class="c1">-- prints &#39;width = 2, height = 4, area = 8&#39;</span>
</pre></div>
</div>
<dl class="function">
<dt id="Class:include">
<code class="descname">Class:include</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#Class:include" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>other</strong> (<em>tables</em>) &#8211; Parent classes/mixins.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The class.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Inherit functions and variables of another class, but only if they are not
already defined. This is done by (deeply) copying the functions and variables
over to the subclass.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">class:include()</span></code> doesn&#8217;t actually care if the arguments supplied are
hump classes. Just any table will work.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use <code class="docutils literal"><span class="pre">Class.include(a,</span> <span class="pre">b)</span></code> to copy any fields from table <code class="docutils literal"><span class="pre">a</span></code>
to table <code class="docutils literal"><span class="pre">b</span></code> (see second example).</p>
</div>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>

<span class="n">Entity</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span>
    <span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="n">GameObjects</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="k">end</span>
<span class="p">}</span>

<span class="n">Collidable</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">dispatch_collision</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">collision_handler</span><span class="p">[</span><span class="n">other</span><span class="p">.</span><span class="n">type</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">collision_handler</span><span class="p">[</span><span class="n">other</span><span class="p">.</span><span class="n">type</span><span class="p">](</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
        <span class="k">end</span>
        <span class="k">return</span> <span class="n">collision_handler</span><span class="p">[</span><span class="s2">&quot;</span><span class="s">*&quot;</span><span class="p">](</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
    <span class="k">end</span><span class="p">,</span>

    <span class="n">collision_handler</span> <span class="o">=</span> <span class="p">{[</span><span class="s2">&quot;</span><span class="s">*&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="k">end</span><span class="p">},</span>
<span class="p">}</span>

<span class="n">Spaceship</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span>
    <span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">Spaceship&quot;</span>
        <span class="c1">-- ...</span>
    <span class="k">end</span>
<span class="p">}</span>

<span class="c1">-- make Spaceship collidable</span>
<span class="n">Spaceship</span><span class="p">:</span><span class="n">include</span><span class="p">(</span><span class="n">Collidable</span><span class="p">)</span>

<span class="n">Spaceship</span><span class="p">.</span><span class="n">collision_handler</span><span class="p">[</span><span class="s2">&quot;</span><span class="s">Spaceship&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
    <span class="c1">-- ...</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- using Class.include()</span>
<span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">bar&#39;</span><span class="p">,</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="p">{</span><span class="n">one</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">two</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">three</span> <span class="o">=</span> <span class="mi">3</span><span class="p">},</span>
    <span class="n">baz</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">baz&#39;</span><span class="p">)</span> <span class="k">end</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">nothing to see here...&#39;</span>
<span class="p">}</span>

<span class="n">Class</span><span class="p">.</span><span class="n">include</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="c1">-- copy values from a to b</span>
                    <span class="c1">-- note that neither a nor b are hump classes!</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">foo</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">foo</span><span class="p">)</span> <span class="c1">-- prints &#39;bar    nothing to see here...&#39;</span>

<span class="n">b</span><span class="p">.</span><span class="n">baz</span><span class="p">()</span> <span class="c1">-- prints &#39;baz&#39;</span>

<span class="n">b</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">one</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1">-- changes only values in b</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">one</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">one</span><span class="p">)</span> <span class="c1">-- prints &#39;1    10&#39;</span>
</pre></div>
</div>
<dl class="function">
<dt id="class:clone">
<code class="descname">class:clone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#class:clone" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A deep copy of the class/table.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Create a clone/deep copy of the class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use <code class="docutils literal"><span class="pre">Class.clone(a)</span></code> to create a deep copy of any table (see
second example).</p>
</div>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>

<span class="n">point</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">}</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">point</span><span class="p">:</span><span class="n">clone</span><span class="p">()</span>
<span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="c1">--&gt; prints &#39;10    10&#39;</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">point</span><span class="p">:</span><span class="n">clone</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="c1">--&gt; prints &#39;0    0&#39;</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="p">:</span><span class="n">clone</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="c1">--&gt; prints &#39;10    10&#39;</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- using Class.clone() to copy tables</span>
<span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">bar&#39;</span><span class="p">,</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="p">{</span><span class="n">one</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">two</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">three</span> <span class="o">=</span> <span class="mi">3</span><span class="p">},</span>
    <span class="n">baz</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">baz&#39;</span><span class="p">)</span> <span class="k">end</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Class</span><span class="p">.</span><span class="n">clone</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">b</span><span class="p">.</span><span class="n">baz</span><span class="p">()</span> <span class="c1">-- prints &#39;baz&#39;</span>
<span class="n">b</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">one</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">one</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">one</span><span class="p">)</span> <span class="c1">-- prints &#39;1    10&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="caveats">
<h4>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h4>
<p>Be careful when using metamethods like <code class="docutils literal"><span class="pre">__add</span></code> or <code class="docutils literal"><span class="pre">__mul</span></code>: If a subclass
inherits those methods from a superclass, but does not overwrite them, the
result of the operation may be of the type superclass. Consider the following:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span><span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="k">end</span><span class="p">}</span>
<span class="k">function</span> <span class="nf">A</span><span class="p">:</span><span class="n">__add</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="k">return</span> <span class="n">A</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="k">end</span>
<span class="k">function</span> <span class="nf">A</span><span class="p">:</span><span class="n">show</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">A:&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="k">end</span>

<span class="n">B</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span><span class="n">init</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">A</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="n">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="k">end</span><span class="p">}</span>
<span class="k">function</span> <span class="nf">B</span><span class="p">:</span><span class="n">show</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">B:&quot;</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="k">end</span>
<span class="k">function</span> <span class="nf">B</span><span class="p">:</span><span class="n">foo</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">foo&quot;</span><span class="p">)</span> <span class="k">end</span>
<span class="n">B</span><span class="p">:</span><span class="n">include</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

<span class="n">one</span><span class="p">,</span> <span class="n">two</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">B</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">one</span> <span class="o">+</span> <span class="n">two</span> <span class="c1">-- result will be of type A, *not* B!</span>
<span class="n">result</span><span class="p">:</span><span class="n">show</span><span class="p">()</span>      <span class="c1">-- prints &quot;A:    4&quot;</span>
<span class="n">result</span><span class="p">:</span><span class="n">foo</span><span class="p">()</span>       <span class="c1">-- error: method does not exist</span>
</pre></div>
</div>
<p>Note that while you can define the <code class="docutils literal"><span class="pre">__index</span></code> metamethod of the class, this is
not a good idea: It will break the class mechanism. To add a custom <code class="docutils literal"><span class="pre">__index</span></code>
metamethod without breaking the class system, you have to use <code class="docutils literal"><span class="pre">rawget()</span></code>. But
beware that this won&#8217;t affect subclasses:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Class</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.class&#39;</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{}</span>
<span class="k">function</span> <span class="nf">A</span><span class="p">:</span><span class="n">foo</span><span class="p">()</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">bar&#39;</span><span class="p">)</span> <span class="k">end</span>

<span class="k">function</span> <span class="nf">A</span><span class="p">:</span><span class="n">__index</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">rawget</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">instance</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="n">instance</span><span class="p">:</span><span class="n">foo</span><span class="p">()</span> <span class="c1">-- prints foo  bar</span>

<span class="n">B</span> <span class="o">=</span> <span class="n">Class</span><span class="p">{</span><span class="n">__includes</span> <span class="o">=</span> <span class="n">A</span><span class="p">}</span>
<span class="n">instance</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span>
<span class="n">instance</span><span class="p">:</span><span class="n">foo</span><span class="p">()</span> <span class="c1">-- prints only foo</span>
</pre></div>
</div>
</div>
</div>
<span id="document-signal"></span><div class="section" id="hump-signal">
<h3>hump.signal<a class="headerlink" href="#hump-signal" title="Permalink to this headline">¶</a></h3>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Signal</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.signal&#39;</span>
</pre></div>
</div>
<p>A simple yet effective implementation of <a class="reference external" href="http://en.wikipedia.org/wiki/Signals_and_slots">Signals and Slots</a>, aka the <a class="reference external" href="http://en.wikipedia.org/wiki/Observer_pattern">Observer pattern</a>: Functions can be dynamically
bound to signals. When a <em>signal</em> is <em>emitted</em>, all registered functions will
be invoked. Simple as that.</p>
<p><code class="docutils literal"><span class="pre">hump.signal</span></code> makes things a little more interesing by allowing to emit all
signals that match a <a class="reference external" href="http://www.lua.org/manual/5.1/manual.html#5.4.1">Lua string pattern</a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- in AI.lua</span>
<span class="n">Signal</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">shoot&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">)</span>
    <span class="c1">-- for every critter in the path of the bullet:</span>
    <span class="c1">-- try to avoid being hit</span>
    <span class="k">for</span> <span class="n">critter</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">critters</span><span class="p">)</span> <span class="k">do</span>
        <span class="k">if</span> <span class="n">critter</span><span class="p">:</span><span class="n">intersectsRay</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">)</span> <span class="k">then</span>
            <span class="n">critter</span><span class="p">:</span><span class="n">setMoveDirection</span><span class="p">(</span><span class="o">-</span><span class="n">dy</span><span class="p">,</span> <span class="n">dx</span><span class="p">)</span>
        <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>

<span class="c1">-- in sounds.lua</span>
<span class="n">Signal</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">shoot&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
    <span class="n">Sounds</span><span class="p">.</span><span class="n">fire_bullet</span><span class="p">:</span><span class="n">play</span><span class="p">()</span>
<span class="k">end</span><span class="p">)</span>

<span class="c1">-- in main.lua</span>
<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s"> &#39;</span> <span class="k">then</span>
        <span class="kd">local</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span>   <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">:</span><span class="nb">unpack</span><span class="p">()</span>
        <span class="kd">local</span> <span class="n">dx</span><span class="p">,</span><span class="n">dy</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">direction</span><span class="p">:</span><span class="nb">unpack</span><span class="p">()</span>
        <span class="n">Signal</span><span class="p">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">shoot&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="function-reference">
<h4>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="Signal.new">
<code class="descclassname">Signal.</code><code class="descname">new</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Signal.new" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A new signal registry.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Creates a new signal registry that is independent of the default registry: It
will manage it&#8217;s own list of signals and does not in any way affect the the
global registry. Likewise, the global registry does not affect the instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don&#8217;t need multiple independent registries, you can use the
global/default registry (see examples).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike the default one, signal registry instances use the colon-syntax,
i.e., you need to call <code class="docutils literal"><span class="pre">instance:emit('foo',</span> <span class="pre">23)</span></code> instead of
<code class="docutils literal"><span class="pre">Signal.mit('foo',</span> <span class="pre">23)</span></code>.</p>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">player</span><span class="p">.</span><span class="n">signals</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">.</span><span class="n">new</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="Signal.register">
<code class="descclassname">Signal.</code><code class="descname">register</code><span class="sig-paren">(</span><em>s</em>, <em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#Signal.register" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>s</strong> (<em>string</em>) &#8211; The signal identifier.</li>
<li><strong>f</strong> (<em>function</em>) &#8211; The function to register.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A function handle to use in <a class="reference internal" href="#Signal.remove" title="Signal.remove"><code class="xref js js-func docutils literal"><span class="pre">Signal.remove()</span></code></a>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Registers a function <code class="docutils literal"><span class="pre">f</span></code> to be called when signal <code class="docutils literal"><span class="pre">s</span></code> is emitted.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Signal</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">level-complete&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="n">self</span><span class="p">.</span><span class="n">fanfare</span><span class="p">:</span><span class="n">play</span><span class="p">()</span> <span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">handle</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">level-load&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">level</span><span class="p">)</span> <span class="n">level</span><span class="p">.</span><span class="n">show_help</span><span class="p">()</span> <span class="k">end</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">menu</span><span class="p">:</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">key-left&#39;</span><span class="p">,</span> <span class="n">select_previous_item</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Signal.emit">
<code class="descclassname">Signal.</code><code class="descname">emit</code><span class="sig-paren">(</span><em>s</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Signal.emit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>s</strong> (<em>string</em>) &#8211; The signal identifier.</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Arguments to pass to the bound functions. (optional)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Calls all functions bound to signal <code class="docutils literal"><span class="pre">s</span></code> with the supplied arguments.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">keypressed</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="c1">-- using a signal instance</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="s">left&#39;</span> <span class="k">then</span> <span class="n">menu</span><span class="p">:</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">key-left&#39;</span><span class="p">)</span> <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">level</span><span class="p">.</span><span class="n">is_finished</span><span class="p">()</span> <span class="k">then</span>
    <span class="c1">-- adding arguments</span>
    <span class="n">Signal</span><span class="p">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">level-load&#39;</span><span class="p">,</span> <span class="n">level</span><span class="p">.</span><span class="n">next_level</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="Signal.remove">
<code class="descclassname">Signal.</code><code class="descname">remove</code><span class="sig-paren">(</span><em>s</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Signal.remove" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>s</strong> (<em>string</em>) &#8211; The signal identifier.</li>
<li><strong>...</strong> (<em>functions</em>) &#8211; Functions to unbind from the signal.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Unbinds (removes) functions from signal <code class="docutils literal"><span class="pre">s</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Signal</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">level-load&#39;</span><span class="p">,</span> <span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Signal.clear">
<code class="descclassname">Signal.</code><code class="descname">clear</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#Signal.clear" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>s</strong> (<em>string</em>) &#8211; The signal identifier.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Removes all functions from signal <code class="docutils literal"><span class="pre">s</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Signal</span><span class="p">.</span><span class="n">clear</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">key-left&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Signal.emitPattern">
<code class="descclassname">Signal.</code><code class="descname">emitPattern</code><span class="sig-paren">(</span><em>p</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Signal.emitPattern" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>p</strong> (<em>string</em>) &#8211; The signal identifier pattern.</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Arguments to pass to the bound functions. (optional)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Emits all signals that match a <a class="reference external" href="http://www.lua.org/manual/5.1/manual.html#5.4.1">Lua string pattern</a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- emit all update signals</span>
<span class="n">Signal</span><span class="p">.</span><span class="n">emitPattern</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">^update%-.*&#39;</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Signal.removePattern">
<code class="descclassname">Signal.</code><code class="descname">removePattern</code><span class="sig-paren">(</span><em>p</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#Signal.removePattern" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>p</strong> (<em>string</em>) &#8211; The signal identifier pattern.</li>
<li><strong>...</strong> (<em>functions</em>) &#8211; Functions to unbind from the signals.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Removes functions from all signals that match a <a class="reference external" href="http://www.lua.org/manual/5.1/manual.html#5.4.1">Lua string pattern</a>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Signal</span><span class="p">.</span><span class="n">removePattern</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">key%-.*&#39;</span><span class="p">,</span> <span class="n">play_click_sound</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="Signal.clearPattern">
<code class="descclassname">Signal.</code><code class="descname">clearPattern</code><span class="sig-paren">(</span><em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#Signal.clearPattern" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>p</strong> (<em>string</em>) &#8211; The signal identifier pattern.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Removes <strong>all</strong> functions from all signals that match a <a class="reference external" href="http://www.lua.org/manual/5.1/manual.html#5.4.1">Lua string pattern</a>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Signal</span><span class="p">.</span><span class="n">clearPattern</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">sound%-.*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">player</span><span class="p">.</span><span class="n">signals</span><span class="p">:</span><span class="n">clearPattern</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">.*&#39;</span><span class="p">)</span> <span class="c1">-- clear all signals</span>
</pre></div>
</div>
</div>
</div>
<span id="document-camera"></span><div class="section" id="hump-camera">
<h3>hump.camera<a class="headerlink" href="#hump-camera" title="Permalink to this headline">¶</a></h3>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">Camera</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">&quot;</span><span class="s">hump.camera&quot;</span>
</pre></div>
</div>
<p>A camera utility for LÖVE. A camera can &#8220;look&#8221; at a position. It can zoom in
and out and it can rotate it&#8217;s view. In the background, this is done by
actually moving, scaling and rotating everything in the game world. But don&#8217;t
worry about that.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">load</span><span class="p">()</span>
    <span class="n">camera</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">dx</span><span class="p">,</span><span class="n">dy</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">cam</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">cam</span><span class="p">.</span><span class="n">y</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">move</span><span class="p">(</span><span class="n">dx</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">dy</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="function-reference">
<h4>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="Camera.new">
<code class="descclassname">Camera.</code><code class="descname">new</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>zoom</em>, <em>rot</em><span class="sig-paren">)</span><a class="headerlink" href="#Camera.new" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; Point for the camera to look at. (optional)</li>
<li><strong>zoom</strong> (<em>number</em>) &#8211; Camera zoom. (optional)</li>
<li><strong>rot</strong> (<em>number</em>) &#8211; Camera rotation in radians. (optional)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A new camera.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Creates a new camera. You can access the camera position using <code class="docutils literal"><span class="pre">camera.x,</span>
<span class="pre">camera.y</span></code>, the zoom using <code class="docutils literal"><span class="pre">camera.scale</span></code> and the rotation using <code class="docutils literal"><span class="pre">camera.rot</span></code>.</p>
<p>The module variable name can be used at a shortcut to <code class="docutils literal"><span class="pre">new()</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">camera</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">&#39;</span><span class="s">hump.camera&#39;</span>
<span class="c1">-- camera looking at (100,100) with zoom 2 and rotated by 45 degrees</span>
<span class="n">cam</span> <span class="o">=</span> <span class="n">camera</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">math.pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:move">
<code class="descname">camera:move</code><span class="sig-paren">(</span><em>dx</em>, <em>dy</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:move" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>dx,dy</strong> (<em>numbers</em>) &#8211; Direction to move the camera.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The camera.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Move the camera <em>by</em> some vector. To set the position, use
<a class="reference internal" href="#camera:lookAt" title="camera:lookAt"><code class="xref js js-func docutils literal"><span class="pre">camera:lookAt()</span></code></a>.</p>
<p>This function is shortcut to <code class="docutils literal"><span class="pre">camera.x,camera.y</span> <span class="pre">=</span> <span class="pre">camera.x+dx,</span> <span class="pre">camera.y+dy</span></code>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">move</span><span class="p">(</span><span class="n">dt</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">dt</span> <span class="o">*</span> <span class="mi">6</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">move</span><span class="p">(</span><span class="n">dt</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">dt</span> <span class="o">*</span> <span class="mi">6</span><span class="p">):</span><span class="n">rotate</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:lookAt">
<code class="descname">camera:lookAt</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:lookAt" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; Position to look at.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The camera.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Let the camera look at a point. In other words, it sets the camera position. To
move the camera <em>by</em> some amount, use <a class="reference internal" href="#camera:move" title="camera:move"><code class="xref js js-func docutils literal"><span class="pre">camera:move()</span></code></a>.</p>
<p>This function is shortcut to <code class="docutils literal"><span class="pre">camera.x,camera.y</span> <span class="pre">=</span> <span class="pre">x,</span> <span class="pre">y</span></code>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">lookAt</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">:</span><span class="nb">unpack</span><span class="p">())</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">lookAt</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">:</span><span class="nb">unpack</span><span class="p">()):</span><span class="n">rotate</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">rot</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:position">
<code class="descname">camera:position</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#camera:position" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">x,y</span></code> &#8211; Camera position.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Returns <code class="docutils literal"><span class="pre">camera.x,</span> <span class="pre">camera.y</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- let the camera fly!</span>
<span class="kd">local</span> <span class="n">cam_dx</span><span class="p">,</span> <span class="n">cam_dy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">mousereleased</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">cx</span><span class="p">,</span><span class="n">cy</span> <span class="o">=</span> <span class="n">camera</span><span class="p">:</span><span class="n">position</span><span class="p">()</span>
    <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">x</span><span class="o">-</span><span class="n">cx</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="n">cy</span>
<span class="k">end</span>

<span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">move</span><span class="p">(</span><span class="n">dx</span> <span class="o">*</span> <span class="n">dt</span><span class="p">,</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:rotate">
<code class="descname">camera:rotate</code><span class="sig-paren">(</span><em>angle</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:rotate" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>angle</strong> (<em>number</em>) &#8211; Rotation angle in radians</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The camera.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Rotate the camera by some angle. To set the angle use <a class="reference internal" href="#camera:rotateTo" title="camera:rotateTo"><code class="xref js js-func docutils literal"><span class="pre">camera:rotateTo()</span></code></a>.</p>
<p>This function is shortcut to <code class="docutils literal"><span class="pre">camera.rot</span> <span class="pre">=</span> <span class="pre">camera.rot</span> <span class="pre">+</span> <span class="pre">angle</span></code>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">rotate</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">rotate</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span><span class="n">move</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span><span class="n">dt</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:rotateTo">
<code class="descname">camera:rotateTo</code><span class="sig-paren">(</span><em>angle</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:rotateTo" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>angle</strong> (<em>number</em>) &#8211; Rotation angle in radians</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The camera.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Set rotation: <code class="docutils literal"><span class="pre">camera.rot</span> <span class="pre">=</span> <span class="pre">angle</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">camera</span><span class="p">:</span><span class="n">rotateTo</span><span class="p">(</span><span class="nb">math.pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:zoom">
<code class="descname">camera:zoom</code><span class="sig-paren">(</span><em>mul</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:zoom" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>mul</strong> (<em>number</em>) &#8211; Zoom change. Should be &gt; 0.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The camera.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><em>Multiply</em> zoom: <code class="docutils literal"><span class="pre">camera.scale</span> <span class="pre">=</span> <span class="pre">camera.scale</span> <span class="pre">*</span> <span class="pre">mul</span></code>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">camera</span><span class="p">:</span><span class="n">zoom</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>   <span class="c1">-- make everything twice as big</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">camera</span><span class="p">:</span><span class="n">zoom</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span> <span class="c1">-- ... and back to normal</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">camera</span><span class="p">:</span><span class="n">zoom</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">-- mirror and flip everything upside down</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:zoomTo">
<code class="descname">camera:zoomTo</code><span class="sig-paren">(</span><em>zoom</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:zoomTo" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>zoom</strong> (<em>number</em>) &#8211; New zoom.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The camera.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Set zoom: <code class="docutils literal"><span class="pre">camera.scale</span> <span class="pre">=</span> <span class="pre">zoom</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">camera</span><span class="p">:</span><span class="n">zoomTo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">-- reset zoom</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:attach">
<code class="descname">camera:attach</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#camera:attach" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Start looking through the camera.</p>
<p>Apply camera transformations, i.e. move, scale and rotate everything until
<code class="docutils literal"><span class="pre">camera:detach()</span></code> as if looking through the camera.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">attach</span><span class="p">()</span>
    <span class="n">draw_world</span><span class="p">()</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">detach</span><span class="p">()</span>

    <span class="n">draw_hud</span><span class="p">()</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:detach">
<code class="descname">camera:detach</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#camera:detach" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Stop looking through the camera.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">attach</span><span class="p">()</span>
    <span class="n">draw_world</span><span class="p">()</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">detach</span><span class="p">()</span>

    <span class="n">draw_hud</span><span class="p">()</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:draw">
<code class="descname">camera:draw</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:draw" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> (<em>function</em>) &#8211; Drawing function to be wrapped.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Wrap a function between a <code class="docutils literal"><span class="pre">camera:attach()</span></code>/<code class="docutils literal"><span class="pre">camera:detach()</span></code> pair.
Equivalent to:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">camera</span><span class="p">:</span><span class="n">attach</span><span class="p">()</span>
<span class="n">func</span><span class="p">()</span>
<span class="n">camera</span><span class="p">:</span><span class="n">detach</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">camera</span><span class="p">:</span><span class="n">draw</span><span class="p">(</span><span class="n">draw_world</span><span class="p">)</span>
    <span class="n">draw_hud</span><span class="p">()</span>
<span class="k">end</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:worldCoords">
<code class="descname">camera:worldCoords</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:worldCoords" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x, y</strong> (<em>numbers</em>) &#8211; Point to transform.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x,y</span></code> &#8211; Transformed point.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Because a camera has a point it looks at, a rotation and a zoom factor, it
defines a coordinate system. A point now has two sets of coordinates: One
defines where the point is to be found in the game world, and the other
describes the position on the computer screen. The first set of coordinates is
called world coordinates, the second one camera coordinates. Sometimes it is
needed to convert between the two coordinate systems, for example to get the
position of a mouse click in the game world in a strategy game, or to see if an
object is visible on the screen.</p>
<p><a class="reference internal" href="#camera:worldCoords" title="camera:worldCoords"><code class="xref js js-func docutils literal"><span class="pre">camera:worldCoords()</span></code></a> and <a class="reference internal" href="#camera:cameraCoords" title="camera:cameraCoords"><code class="xref js js-func docutils literal"><span class="pre">camera:cameraCoords()</span></code></a> transform points
between these two coordinate systems.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">camera</span><span class="p">:</span><span class="n">worldCoords</span><span class="p">(</span><span class="n">love</span><span class="p">.</span><span class="n">mouse</span><span class="p">.</span><span class="n">getPosition</span><span class="p">())</span>
<span class="n">selectedUnit</span><span class="p">:</span><span class="n">plotPath</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:cameraCoords">
<code class="descname">camera:cameraCoords</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:cameraCoords" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>x, y</strong> (<em>numbers</em>) &#8211; Point to transform.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">x,y</span></code> &#8211; Transformed point.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Because a camera has a point it looks at, a rotation and a zoom factor, it
defines a coordinate system. A point now has two sets of coordinates: One
defines where the point is to be found in the game world, and the other
describes the position on the computer screen. The first set of coordinates is
called world coordinates, the second one camera coordinates. Sometimes it is
needed to convert between the two coordinate systems, for example to get the
position of a mouse click in the game world in a strategy game, or to see if an
object is visible on the screen.</p>
<p><a class="reference internal" href="#camera:worldCoords" title="camera:worldCoords"><code class="xref js js-func docutils literal"><span class="pre">camera:worldCoords()</span></code></a> and <a class="reference internal" href="#camera:cameraCoords" title="camera:cameraCoords"><code class="xref js js-func docutils literal"><span class="pre">camera:cameraCoords()</span></code></a> transform points
between these two coordinate systems.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">camera</span><span class="p">:</span><span class="n">cameraCoords</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">love</span><span class="p">.</span><span class="n">graphics</span><span class="p">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">love</span><span class="p">.</span><span class="n">mouse</span><span class="p">.</span><span class="n">getPosition</span><span class="p">())</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:mousePosition">
<code class="descname">camera:mousePosition</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#camera:mousePosition" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Mouse position in world coordinates.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Shortcut to <code class="docutils literal"><span class="pre">camera:worldCoords(love.mouse.getPosition())</span></code>.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">camera</span><span class="p">:</span><span class="n">mousePosition</span><span class="p">()</span>
<span class="n">selectedUnit</span><span class="p">:</span><span class="n">plotPath</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="camera-movement-control">
<h4>Camera Movement Control<a class="headerlink" href="#camera-movement-control" title="Permalink to this headline">¶</a></h4>
<p>Camera movement is one of these things that go almost unnoticed when done well,
but add a lot to the overall experience.
The article <a class="reference external" href="http://gamasutra.com/blogs/ItayKeren/20150511/243083/Scroll_Back_The_Theory_and_Practice_of_Cameras_in_SideScrollers.php">Scroll Back: The Theory and Practice of Cameras in SideScrollers</a>
by Itay Keren gives a lot of insight into how to design good camera systems.</p>
<p><strong>hump.camera</strong> offers functions that help to implement most of the techniques
discussed in the article. The functions <a class="reference internal" href="#camera:lockX" title="camera:lockX"><code class="xref js js-func docutils literal"><span class="pre">camera:lockX()</span></code></a>,
<a class="reference internal" href="#camera:lockY" title="camera:lockY"><code class="xref js js-func docutils literal"><span class="pre">camera:lockY()</span></code></a>, <a class="reference internal" href="#camera:lockPosition" title="camera:lockPosition"><code class="xref js js-func docutils literal"><span class="pre">camera:lockPosition()</span></code></a>, and <a class="reference internal" href="#camera:lockWindow" title="camera:lockWindow"><code class="xref js js-func docutils literal"><span class="pre">camera:lockWindow()</span></code></a>
move the camera so that the interesting content stays in frame.
Note that the functions must be called every frame:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nc">love</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>
   <span class="c1">-- vertical locking</span>
   <span class="n">camera</span><span class="p">:</span><span class="n">lockX</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>All movements are subject to smoothing (see <a class="reference internal" href="#movement-smoothers"><span>Movement Smoothers</span></a>).
You can specify a default movement smoother by assigning the variable
<a class="reference internal" href="#camera.smoother" title="camera.smoother"><code class="xref js js-attr docutils literal"><span class="pre">camera.smoother</span></code></a>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">cam</span><span class="p">.</span><span class="n">smoother</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">linear</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:lockX">
<code class="descname">camera:lockX</code><span class="sig-paren">(</span><em>x</em>, <em>smoother</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:lockX" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>x</strong> (<em>number</em>) &#8211; X coordinate (in world coordinates) to lock to.</li>
<li><strong>smoother</strong> (<em>function</em>) &#8211; Movement smoothing override. (optional)</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Additional parameters to the smoothing function. (optional)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Horizontal camera locking: Keep the camera locked on the defined <code class="docutils literal"><span class="pre">x</span></code>-position
(in <em>world coordinates</em>). The <code class="docutils literal"><span class="pre">y</span></code>-position is not affected.</p>
<p>You can define an off-center locking position by &#8220;aiming&#8221; the camera left or
right of your actual target. For example, to center the player 20 pixels to the
<em>left</em> of the screen, aim 20 pixels to it&#8217;s <em>right</em> (see examples).</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- lock on player vertically</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockX</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- ... with linear smoothing at 25 px/s</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockX</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">linear</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- lock player 20px left of center</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockX</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:lockY">
<code class="descname">camera:lockY</code><span class="sig-paren">(</span><em>y</em>, <em>smoother</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:lockY" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>y</strong> (<em>number</em>) &#8211; Y coordinate (in world coordinates) to lock to.</li>
<li><strong>smoother</strong> (<em>function</em>) &#8211; Movement smoothing override. (optional)</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Additional parameters to the smoothing function. (optional)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Vertical camera locking: Keep the camera locked on the defined <code class="docutils literal"><span class="pre">y</span></code>-position
(in <em>world coordinates</em>). The <code class="docutils literal"><span class="pre">x</span></code>-position is not affected.</p>
<p>You can define an off-center locking position by &#8220;aiming&#8221; the camera above or
below your actual target. For example, to center the player 20 pixels <em>below</em> the
screen center, aim 20 pixels <em>above</em> it (see examples).</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- lock on player horizontally</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockY</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- ... with damped smoothing with a stiffness of 10</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockY</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">damped</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- lock player 20px below the screen center</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockY</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:lockPosition">
<code class="descname">camera:lockPosition</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>smoother</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:lockPosition" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; Position (in world coordinates) to lock to.</li>
<li><strong>smoother</strong> (<em>function</em>) &#8211; Movement smoothing override. (optional)</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Additional parameters to the smoothing function. (optional)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Horizontal and vertical camera locking: Keep the camera locked on the defined
position (in <em>world coordinates</em>).</p>
<p>You can define an off-center locking position by &#8220;aiming&#8221; the camera to the
opposite direction away from your real target.
For example, to center the player 10 pixels to the <em>left</em> and 20 pixels <em>above</em>
the screen center, aim 10 pixels to the <em>right</em> and 20 pixels <em>below</em>.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- lock on player</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockPosition</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- lock 50 pixels into player&#39;s aiming direction</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockPosition</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">player</span><span class="p">.</span><span class="n">aiming</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="mi">50</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">player</span><span class="p">.</span><span class="n">aiming</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="camera:lockWindow">
<code class="descname">camera:lockWindow</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>x_min</em>, <em>x_max</em>, <em>y_min</em>, <em>y_max</em>, <em>smoother</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#camera:lockWindow" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>x,y</strong> (<em>numbers</em>) &#8211; Position (in world coordinates) to lock to.</li>
<li><strong>x_min</strong> (<em>numbers</em>) &#8211; Upper left X coordinate of the camera window <em>(in camera coordinates!)</em>.</li>
<li><strong>x_max</strong> (<em>numbers</em>) &#8211; Lower right X coordinate of the camera window <em>(in camera coordinates!)</em>.</li>
<li><strong>y_min</strong> (<em>numbers</em>) &#8211; Upper left Y coordinate of the camera window <em>(in camera coordinates!)</em>.</li>
<li><strong>y_max</strong> (<em>numbers</em>) &#8211; Lower right Y coordinate of the camera window <em>(in camera coordinates!)</em>.</li>
<li><strong>smoother</strong> (<em>function</em>) &#8211; Movement smoothing override. (optional)</li>
<li><strong>...</strong> (<em>mixed</em>) &#8211; Additional parameters to the smoothing function. (optional)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>The most powerful locking method: Lock camera to <code class="docutils literal"><span class="pre">x,y</span></code>, but only move the
camera if the position would be out of the screen-rectangle defined by <code class="docutils literal"><span class="pre">x_min</span></code>,
<code class="docutils literal"><span class="pre">x_max</span></code>, <code class="docutils literal"><span class="pre">y_min</span></code>, <code class="docutils literal"><span class="pre">y_max</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The locking window is defined in camera coordinates, whereas the position to
lock to is defined in world coordinates!</p>
</div>
<p>All of the other locking methods can be implemented by window locking. For
position locking, set <code class="docutils literal"><span class="pre">x_min</span> <span class="pre">=</span> <span class="pre">x_max</span></code> and <code class="docutils literal"><span class="pre">y_min</span> <span class="pre">=</span> <span class="pre">y_max</span></code>.
Off-center locking can be done by defining the locking window accordingly.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- lock on player</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lock</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="camera.smoother">
<code class="descclassname">camera.</code><code class="descname">smoother</code><a class="headerlink" href="#camera.smoother" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The default smoothing operator. Must be a <code class="docutils literal"><span class="pre">function</span></code> with the following
prototype:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">customSmoother</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="n">do_stuff</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">new_dx</span><span class="p">,</span><span class="n">new_dy</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">dx,dy</span></code> is the offset the camera would move before smoothing and
<code class="docutils literal"><span class="pre">new_dx,</span> <span class="pre">new_dy</span></code> is the offset the camera should move after smoothing.</p>
<div class="section" id="movement-smoothers">
<span id="id1"></span><h5>Movement Smoothers<a class="headerlink" href="#movement-smoothers" title="Permalink to this headline">¶</a></h5>
<p>It is not always desirable that the camera instantly locks on a target.
<a class="reference external" href="http://gamasutra.com/blogs/ItayKeren/20150511/243083/Scroll_Back_The_Theory_and_Practice_of_Cameras_in_SideScrollers.php#h.rncuomopycy0">Platform snapping</a>,
for example, would look terrible if the camera would instantly jump to the
focussed platform.
Smoothly moving the camera to the locked position can also give the illusion of
a camera operator an add to the overall feel of your game.</p>
<p><strong>hump.camera</strong> allows to smooth the movement by either passing movement
smoother functions to the locking functions or by setting a default smoother
(see <a class="reference internal" href="#camera.smoother" title="camera.smoother"><code class="xref js js-attr docutils literal"><span class="pre">camera.smoother</span></code></a>).</p>
<p>Smoothing functions must have the following prototype:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">customSmoother</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="n">do_stuff</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">new_dx</span><span class="p">,</span><span class="n">new_dy</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">dx,dy</span></code> is the offset the camera would move before smoothing and
<code class="docutils literal"><span class="pre">new_dx,</span> <span class="pre">new_dy</span></code> is the offset the camera should move after smoothing.</p>
<p>This is a simple &#8220;rubber-band&#8221; smoother:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">rubber_band</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">love</span><span class="p">.</span><span class="n">timer</span><span class="p">.</span><span class="n">getDelta</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">dx</span><span class="o">*</span><span class="n">dt</span><span class="p">,</span> <span class="n">dy</span><span class="o">*</span><span class="n">dt</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>hump.camera</strong> defines generators for the most common smoothers:</p>
<dl class="function">
<dt id="Camera.smooth.none">
<code class="descclassname">Camera.smooth.</code><code class="descname">none</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Camera.smooth.none" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Smoothing function.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Dummy smoother: does not smooth the motion.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">cam</span><span class="p">.</span><span class="n">smoother</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">none</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="Camera.smooth.linear">
<code class="descclassname">Camera.smooth.</code><code class="descname">linear</code><span class="sig-paren">(</span><em>speed</em><span class="sig-paren">)</span><a class="headerlink" href="#Camera.smooth.linear" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>speed</strong> (<em>number</em>) &#8211; Smoothing speed.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Smoothing function.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Smoothly moves the camera towards to snapping goal with constant speed.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">cam</span><span class="p">.</span><span class="n">smoother</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">linear</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- warning: creates a function every frame!</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockX</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">linear</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
</pre></div>
</div>
<dl class="function">
<dt id="Camera.smooth.damped">
<code class="descclassname">Camera.smooth.</code><code class="descname">damped</code><span class="sig-paren">(</span><em>stiffness</em><span class="sig-paren">)</span><a class="headerlink" href="#Camera.smooth.damped" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>stiffness</strong> (<em>number</em>) &#8211; Speed of the camera movement.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Smoothing function.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Smoothly moves the camera towards the goal with a speed proportional to the
distance to the target.
Stiffness defines the speed of the motion: Higher values mean that the camera
moves more quickly.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="n">cam</span><span class="p">.</span><span class="n">smoother</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">damped</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-lua"><div class="highlight"><pre><span></span><span class="c1">-- warning: creates a function every frame!</span>
<span class="n">camera</span><span class="p">:</span><span class="n">lockPosition</span><span class="p">(</span><span class="n">player</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">player</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">Camera</span><span class="p">.</span><span class="n">smooth</span><span class="p">.</span><span class="n">damped</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-license"></span><div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Copyright (c) 2011-2015 Matthias Richter</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &#8220;Software&#8221;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>Except as contained in this notice, the name(s) of the above copyright holders
shall not be used in advertising or otherwise to promote the sale, use or
other dealings in this Software without prior written authorization.</p>
<p>THE SOFTWARE IS PROVIDED &#8220;AS IS&#8221;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</div>
</div>
</div>
<div class="section" id="get-hump">
<h2>Get hump<a class="headerlink" href="#get-hump" title="Permalink to this headline">¶</a></h2>
<p>You can view and download the individual modules on github: <a class="reference external" href="http://github.com/vrld/hump">vrld/hump</a>.
You may also download the whole packed sourcecode either in the <a class="reference external" href="http://github.com/vrld/hump/zipball/master">zip</a> or <a class="reference external" href="http://github.com/vrld/hump/tarball/master">tar</a> format.</p>
<p>Using <a class="reference external" href="http://git-scm.com">Git</a>, you can clone the project by running:</p>
<blockquote>
<div>git clone git://github.com/vrld/hump</div></blockquote>
<p>Once done, tou can check for updates by running</p>
<blockquote>
<div>git pull</div></blockquote>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span>Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span>Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span>Search Page</span></a></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Matthias Richter.
      
        <span class="commit">
          Revision <code>40aa4cb7</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//readthedocs.org/projects/hump/downloads/htmlzip/latest/">htmlzip</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/hump/?fromdocs=hump">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/hump/?fromdocs=hump">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>